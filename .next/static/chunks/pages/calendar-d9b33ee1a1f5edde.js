(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{3317:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return a(5746)}])},4820:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(5893);a(7294);var s=a(1163);function l(e){let{children:t}=e,a=(0,s.useRouter)(),l=e=>"/"===e?"/"===a.pathname:a.pathname.startsWith(e);return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"w-64 bg-gray-900 text-white flex flex-col",children:[(0,r.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"Moniteye"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Intranet Dashboard"})]}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:[{name:"Dashboard",href:"/",icon:"\uD83C\uDFE0"},{name:"Tasks",href:"/tasks",icon:"\uD83D\uDCCB"},{name:"Calendar",href:"/calendar",icon:"\uD83D\uDCC5"},{name:"Admin",href:"/admin",icon:"⚙️"},{name:"About",href:"/about",icon:"ℹ️"}].map(e=>(0,r.jsxs)("a",{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ".concat(l(e.href)?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"),children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),(0,r.jsx)("span",{className:"font-medium",children:e.name})]},e.name))}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-sm font-medium",children:"AK"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white text-sm font-medium",children:"Alex Keal"}),(0,r.jsx)("p",{className:"text-gray-400 text-xs",children:"Admin"})]})]})})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:t})]})}},5746:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(5893),s=a(645),l=a.n(s),n=a(7294),d=a(3907),o=a(6993),i=a(1029),c=a(9897),m=a(4820);function x(){let[e,t]=(0,n.useState)(null),[a,s]=(0,n.useState)([]),[x,u]=(0,n.useState)([]),[h,f]=(0,n.useState)(!0),[b,p]=(0,n.useState)(!0),[g,y]=(0,n.useState)([]);(0,n.useEffect)(()=>{t(new Date)},[]),(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/timetastic");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();s(t.holidays||[])}catch(e){console.error("Failed to fetch holidays:",e),s([])}finally{f(!1)}})()},[]),(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/employee-holidays");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.json();u(t.holidays||[])}catch(e){console.error("Failed to fetch employee holidays:",e),u([])}finally{p(!1)}})()},[]),(0,n.useEffect)(()=>{let e=[];a.forEach(t=>{e.push({id:"holiday-".concat(t.id),title:"\uD83C\uDF89 ".concat(t.name),start:t.date,backgroundColor:"#10b981",borderColor:"#059669",textColor:"#ffffff",extendedProps:{type:"public",description:t.name}})}),x.forEach(t=>{if(t.approved){let a="Holiday"===t.type?"#3b82f6":"Sick Leave"===t.type?"#ef4444":"Meeting"===t.type?"#8b5cf6":"#6b7280",r="Holiday"===t.type?"#2563eb":"Sick Leave"===t.type?"#dc2626":"Meeting"===t.type?"#7c3aed":"#4b5563";e.push({id:"employee-".concat(t.id),title:"\uD83D\uDC64 ".concat(t.employeeName),start:t.startDate,end:t.duration>1?t.endDate:void 0,backgroundColor:a,borderColor:r,textColor:"#ffffff",extendedProps:{type:"employee",employeeName:t.employeeName,description:"".concat(t.type).concat(t.reason?" - ".concat(t.reason):""),duration:t.duration,reason:t.reason}})}}),y(e)},[a,x]);let v=()=>{if(!e)return[];let t=new Date;t.setHours(0,0,0,0);let r=new Date(t);return r.setFullYear(r.getFullYear()+1),a.filter(e=>{let a=new Date(e.date);return a.setHours(0,0,0,0),a>=t&&a<=r}).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())},j=()=>{if(!e)return[];let t=new Date;t.setHours(0,0,0,0);let a=new Date(t);return a.setMonth(a.getMonth()+6),x.filter(e=>{let r=new Date(e.startDate);return r.setHours(0,0,0,0),r>=t&&r<=a&&e.approved}).sort((e,t)=>new Date(e.startDate).getTime()-new Date(t.startDate).getTime())};return e?(0,r.jsx)(m.Z,{children:(0,r.jsx)("div",{className:"flex-1 bg-gray-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 -mx-6 -mt-6 mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Calendar"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"View and manage your schedule and events"})]}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,r.jsxs)("div",{className:"flex-1 bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-1"}),(0,r.jsx)("span",{children:"Public Holiday"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-1"}),(0,r.jsx)("span",{children:"Team Holiday"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-1"}),(0,r.jsx)("span",{children:"Sick Leave"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full mr-1"}),(0,r.jsx)("span",{children:"Meeting"})]})]}),(0,r.jsxs)("div",{className:"jsx-119c57a76ed274e4 calendar-container",children:[(0,r.jsx)(l(),{id:"119c57a76ed274e4",children:".fc{font-family:inherit}.fc-theme-standard .fc-popover{border:1px solid#e5e7eb;-webkit-box-shadow:0 10px 15px -3px rgba(0,0,0,.1);-moz-box-shadow:0 10px 15px -3px rgba(0,0,0,.1);box-shadow:0 10px 15px -3px rgba(0,0,0,.1)}.fc-theme-standard .fc-popover-header{background:#f9fafb;border-bottom:1px solid#e5e7eb}.fc-button-primary{background-color:#3b82f6!important;border-color:#3b82f6!important;color:white!important}.fc-button-primary:hover{background-color:#2563eb!important;border-color:#2563eb!important}.fc-button-primary:focus{-webkit-box-shadow:0 0 0 .2rem rgba(59,130,246,.25)!important;-moz-box-shadow:0 0 0 .2rem rgba(59,130,246,.25)!important;box-shadow:0 0 0 .2rem rgba(59,130,246,.25)!important}.fc-today-button:disabled{background-color:#6b7280!important;border-color:#6b7280!important}.fc-day-today{background-color:#dbeafe!important}.fc-event{cursor:pointer;font-size:.75rem;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:2px 4px}.fc-event:hover{opacity:.8}.fc-daygrid-event{margin-bottom:1px}.fc-toolbar-title{color:#1f2937;font-weight:600}.fc-col-header-cell{background-color:#f9fafb;font-weight:500;color:#4b5563}.fc-scrollgrid{border:1px solid#e5e7eb;-webkit-border-radius:.5rem;-moz-border-radius:.5rem;border-radius:.5rem;overflow:hidden}"}),(0,r.jsx)(d.Z,{plugins:[o.Z,i.Z,c.ZP],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:g,eventClick:e=>{let{event:t}=e,a=t.extendedProps,r="".concat(t.title,"\n\n");"public"===a.type?r+="Public Holiday: ".concat(a.description):(r+="Employee: ".concat(a.employeeName,"\n")+"Type: ".concat(a.description,"\n"),a.duration>1&&(r+="Duration: ".concat(a.duration," days"))),alert(r)},height:"auto",firstDay:0,weekends:!0,eventDisplay:"block",dayMaxEvents:3,moreLinkClick:"popover",eventMouseEnter:e=>{e.el.style.transform="scale(1.02)",e.el.style.zIndex="1000"},eventMouseLeave:e=>{e.el.style.transform="scale(1)",e.el.style.zIndex="auto"}})]})]}),(0,r.jsxs)("div",{className:"w-full lg:w-80 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83C\uDF89 Upcoming Public Holidays"}),h?(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Loading holidays..."})]}):(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f9fafb"},children:v().length>0?v().map(t=>{let a=new Date(t.date),s=!!e&&a.toDateString()===e.toDateString(),l=e?Math.ceil((a.getTime()-e.getTime())/864e5):0;return(0,r.jsxs)("div",{className:"flex items-center p-3 rounded-lg border-l-4 ".concat("US"===t.country?"bg-red-50 border-red-400":"bg-green-50 border-green-400"),children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 flex-shrink-0 ".concat("US"===t.country?"bg-red-500":"bg-green-500")}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:t.name}),(0,r.jsxs)("div",{className:"text-xs text-gray-600",children:[a.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),s&&" - Today!",!s&&l>0&&" - in ".concat(l," day").concat(1===l?"":"s")]})]})]},t.id)}):(0,r.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg",children:(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"No upcoming holidays in the next year"})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:["Team Holidays & Leave",(0,r.jsx)("span",{className:"ml-2 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:j().length})]}),b?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mx-auto"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Loading team holidays..."})]}):(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2 border border-gray-100 rounded-lg p-2",style:{scrollbarWidth:"thin",scrollbarColor:"#d1d5db #f9fafb",backgroundColor:"#fafafa"},children:j().length>0?j().map(t=>{let a=new Date(t.startDate),s=!!e&&a.toDateString()===e.toDateString(),l=e?Math.ceil((a.getTime()-e.getTime())/864e5):0;return(0,r.jsx)("div",{className:"p-3 rounded-lg border-l-4 shadow-sm ".concat("Holiday"===t.type?"bg-blue-50 border-blue-400":"Sick Leave"===t.type?"bg-red-50 border-red-400":"Meeting"===t.type?"bg-purple-50 border-purple-400":"bg-gray-50 border-gray-400"),children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 mt-1 flex-shrink-0 ".concat("Holiday"===t.type?"bg-blue-500":"Sick Leave"===t.type?"bg-red-500":"Meeting"===t.type?"bg-purple-500":"bg-gray-500")}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:t.employeeName}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["\uD83D\uDCC5 ",t.dateRange," • ",t.type,t.duration>1&&" • ".concat(t.duration," day").concat(1===t.duration?"":"s")]}),t.reason&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1 bg-white/50 px-2 py-1 rounded",children:["\uD83D\uDCAC ",t.reason]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1 font-medium",children:[s&&"\uD83D\uDE80 Starting today!",!s&&l>0&&"⏰ Starting in ".concat(l," day").concat(1===l?"":"s"),!s&&0===l&&"\uD83D\uDE80 Starting today"]})]})]})},t.id)}):(0,r.jsxs)("div",{className:"p-6 bg-white rounded-lg text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 text-4xl mb-2",children:"\uD83D\uDCC5"}),(0,r.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"No team holidays scheduled"}),(0,r.jsx)("p",{className:"text-gray-400 text-xs mt-1",children:"for the next 6 months"})]})})]})]})]})]})})}):(0,r.jsx)(m.Z,{children:(0,r.jsx)("div",{className:"flex-1 bg-gray-50 p-6 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,r.jsx)("p",{children:"Loading calendar..."})]})})})}}},function(e){e.O(0,[69,900,888,774,179],function(){return e(e.s=3317)}),_N_E=e.O()}]);