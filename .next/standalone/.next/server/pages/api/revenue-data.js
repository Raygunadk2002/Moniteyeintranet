"use strict";(()=>{var e={};e.id=109,e.ids=[109],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},8395:(e,t,n)=>{n.r(t),n.d(t,{config:()=>p,default:()=>d,routeModule:()=>c});var a={};n.r(a),n.d(a,{default:()=>l});var r=n(1802),o=n(7153),u=n(6249),i=n(6137);function s(){let e=[45,52,48,67,73,81,94,87,95,102,89,124].map(e=>Math.round(1e3*e/1.2)/1e3);return{monthlyRevenue:[],lastUpdated:new Date().toISOString(),totalRevenue:Math.round(103802.5),revenueChange:"+12.5%",revenueData:e}}async function l(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let{data:e,error:n}=await i.pR.from("revenue_data").select("*").order("year",{ascending:!0}).order("month_number",{ascending:!0});if(n)return console.error("Supabase error:",n),t.status(200).json(s());if(!e||0===e.length)return t.status(200).json(s());let a=e.map(e=>({month:e.month,revenue:parseFloat(e.revenue)/1.2,timestamp:e.updated_at})),r=e.reduce((e,t)=>e+parseFloat(t.revenue)/1.2,0),o="+0.0%";if(e.length>=2){let t=parseFloat(e[e.length-1].revenue)/1.2,n=parseFloat(e[e.length-2].revenue)/1.2,a=(t-n)/n*100;o=`${a>=0?"+":""}${a.toFixed(1)}%`}let u=e.map(e=>Math.round(parseFloat(e.revenue)/1.2/1e3)),l=e.length>0?e[e.length-1].updated_at:new Date().toISOString(),d={monthlyRevenue:a,lastUpdated:l,totalRevenue:r,revenueChange:o,revenueData:u};t.status(200).json(d)}catch(e){console.error("Error fetching revenue data:",e),t.status(200).json(s())}}let d=(0,u.l)(a,"default"),p=(0,u.l)(a,"config"),c=new r.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/revenue-data",pathname:"/api/revenue-data",bundlePath:"",filename:""},userland:a})},6137:(e,t,n)=>{n.d(t,{OQ:()=>u,pR:()=>i});let a=require("@supabase/supabase-js"),r="https://tfskdfkzhqiiamziggoB.supabase.co",o=process.env.SUPABASE_SERVICE_ROLE_KEY,u=(0,a.createClient)(r,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmc2tkZmt6aHFpaWFtemlnZ29iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0Nzc3ODksImV4cCI6MjA2NTA1Mzc4OX0.wUR1GCbNEMrjcVRNG0l03Y0uXDgxd1y7wfAIGxSz5kA",{auth:{autoRefreshToken:!0,persistSession:!0},global:{fetch:(e,t={})=>fetch(e,{...t,signal:AbortSignal.timeout(3e4)})}}),i=(0,a.createClient)(r,o,{auth:{autoRefreshToken:!1,persistSession:!1},global:{fetch:(e,t={})=>fetch(e,{...t,signal:AbortSignal.timeout(45e3)})}})},7153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},1802:(e,t,n)=>{e.exports=n(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=8395);module.exports=n})();