"use strict";(()=>{var e={};e.id=494,e.ids=[494],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},9125:(e,t,n)=>{n.r(t),n.d(t,{config:()=>u,default:()=>l,routeModule:()=>f});var s={};n.r(s),n.d(s,{default:()=>c});var o=n(1802),r=n(7153),a=n(6249),i=n(6137);async function c(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{console.log("=== SUPABASE CONNECTION DIAGNOSTIC ===");let e={NEXT_PUBLIC_SUPABASE_URL:!0,NEXT_PUBLIC_SUPABASE_ANON_KEY:!0,SUPABASE_SERVICE_ROLE_KEY:!!process.env.SUPABASE_SERVICE_ROLE_KEY,url:"https://tfskdfkzhqiiamziggoB.supabase.co".substring(0,30)+"..."};console.log("Environment variables:",e);let{data:n,error:s}=await i.pR.from("health_check").select("*").limit(1);console.log("Health check result:",{healthData:n,healthError:s});let o={};for(let e of["upload_batches","invoices","revenue_data"])try{let{data:t,error:n,count:s}=await i.pR.from(e).select("*",{count:"exact",head:!0});o[e]={exists:!n,error:n?.message||null,count:s||0}}catch(n){let t=n instanceof Error?n.message:"Unknown error";o[e]={exists:!1,error:t,count:0}}return console.log("Table test results:",o),t.status(200).json({success:!0,environment:e,tables:o,message:"Connection test completed"})}catch(s){let e=s instanceof Error?s.message:"Unknown error",n=s instanceof Error?s.stack:void 0;return console.error("Connection test error:",s),t.status(500).json({success:!1,error:e,details:n,message:"Connection test failed"})}}let l=(0,a.l)(s,"default"),u=(0,a.l)(s,"config"),f=new o.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/test-supabase-connection",pathname:"/api/test-supabase-connection",bundlePath:"",filename:""},userland:s})},6137:(e,t,n)=>{n.d(t,{OQ:()=>a,pR:()=>i});let s=require("@supabase/supabase-js"),o="https://tfskdfkzhqiiamziggoB.supabase.co",r=process.env.SUPABASE_SERVICE_ROLE_KEY,a=(0,s.createClient)(o,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmc2tkZmt6aHFpaWFtemlnZ29iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0Nzc3ODksImV4cCI6MjA2NTA1Mzc4OX0.wUR1GCbNEMrjcVRNG0l03Y0uXDgxd1y7wfAIGxSz5kA",{auth:{autoRefreshToken:!0,persistSession:!0},global:{fetch:(e,t={})=>fetch(e,{...t,signal:AbortSignal.timeout(3e4)})}}),i=(0,s.createClient)(o,r,{auth:{autoRefreshToken:!1,persistSession:!1},global:{fetch:(e,t={})=>fetch(e,{...t,signal:AbortSignal.timeout(45e3)})}})},7153:(e,t)=>{var n;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return n}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(n||(n={}))},1802:(e,t,n)=>{e.exports=n(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=9125);module.exports=n})();