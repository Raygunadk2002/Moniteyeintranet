"use strict";(()=>{var e={};e.id=202,e.ids=[202],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},70:(e,t,a)=>{a.r(t),a.d(t,{config:()=>p,default:()=>d,routeModule:()=>l});var o={};a.r(o),a.d(o,{default:()=>s});var n=a(1802),r=a(7153),i=a(6249);async function s(e,t){let a="acf87e83-3e43-42df-b7d6-861a69f90414";try{let e=new Date().getFullYear(),[o,n]=await Promise.all([fetch(`https://app.timetastic.co.uk/api/holidays?year=${e}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),fetch(`https://app.timetastic.co.uk/api/holidays?year=${e+1}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})]),r=[];if(o.ok){let e=await o.json();e.holidays&&Array.isArray(e.holidays)&&r.push(...e.holidays)}if(n.ok){let e=await n.json();e.holidays&&Array.isArray(e.holidays)&&r.push(...e.holidays)}let i=r.map((e,t)=>({id:e.id||t+1,employeeId:e.userId,employeeName:e.userName||"Unknown Employee",startDate:e.startDate?e.startDate.split("T")[0]:null,endDate:e.endDate?e.endDate.split("T")[0]:null,dateRange:e.dateRangeString||"",status:e.status,type:e.leaveType||"Holiday",duration:e.duration||1,deduction:e.deduction||0,reason:e.reason||"",approved:"Approved"===e.status,startType:e.startType||"Morning",endType:e.endType||"Afternoon"})).filter(e=>e.startDate);t.status(200).json({holidays:i})}catch(e){console.error("Error fetching employee holidays:",e),t.status(200).json({holidays:[{id:1,employeeId:123,employeeName:"Alex Keal",startDate:"2025-07-15",endDate:"2025-07-19",status:"approved",type:"Annual Leave",days:5,notes:"Summer vacation",approved:!0},{id:2,employeeId:124,employeeName:"Sarah Johnson",startDate:"2025-08-10",endDate:"2025-08-12",status:"pending",type:"Sick Leave",days:3,notes:"Medical appointment",approved:!1},{id:3,employeeId:125,employeeName:"Mike Smith",startDate:"2025-09-05",endDate:"2025-09-05",status:"approved",type:"Personal Day",days:1,notes:"",approved:!0}]})}}let d=(0,i.l)(o,"default"),p=(0,i.l)(o,"config"),l=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/employee-holidays",pathname:"/api/employee-holidays",bundlePath:"",filename:""},userland:o})},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=70);module.exports=a})();