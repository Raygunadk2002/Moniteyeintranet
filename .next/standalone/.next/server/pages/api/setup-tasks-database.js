"use strict";(()=>{var e={};e.id=805,e.ids=[805],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},5425:(e,t,s)=>{s.r(t),s.d(t,{config:()=>l,default:()=>c,routeModule:()=>u});var i={};s.r(i),s.d(i,{default:()=>d});var r=s(1802),a=s(7153),o=s(6249),n=s(6137);async function d(e,t){if("POST"!==e.method)return t.status(405).json({message:"Method not allowed"});try{console.log("Setting up tasks database tables...");let{error:e}=await n.pR.from("task_columns").upsert([{id:"backlog",title:"\uD83D\uDCCB Backlog",order_index:0},{id:"todo",title:"\uD83D\uDCDD To Do",order_index:1},{id:"in-progress",title:"\uD83D\uDD04 In Progress",order_index:2},{id:"review",title:"\uD83D\uDC40 Review",order_index:3},{id:"done",title:"âœ… Done",order_index:4}],{onConflict:"id",ignoreDuplicates:!1});if(e)return console.error("Error setting up task columns:",e),t.status(500).json({success:!1,error:`Failed to setup task columns: ${e.message}`});let{data:s,error:i}=await n.pR.from("tasks").select("id").limit(1);if(i)return console.error("Error checking existing tasks:",i),t.status(500).json({success:!1,error:`Failed to check existing tasks: ${i.message}`});if(s&&0!==s.length)console.log("Tasks already exist, skipping sample data insertion");else{let{error:e}=await n.pR.from("tasks").insert([{id:"task-1",title:"System Performance Audit",description:"Complete comprehensive review of system performance metrics and identify bottlenecks",priority:"High",assignee:"Alex K.",tags:["performance","audit"],column_id:"backlog",order_index:0},{id:"task-2",title:"Update Security Protocols",description:"Review and update all security protocols according to latest compliance standards",priority:"Medium",assignee:"Sarah M.",tags:["security","compliance"],column_id:"backlog",order_index:1},{id:"task-3",title:"Database Optimization",description:"Optimize database queries and indexing for better performance",priority:"Low",assignee:"Mike R.",tags:["database","optimization"],column_id:"todo",order_index:0},{id:"task-4",title:"API Integration",description:"Integrate third-party payment gateway API",priority:"Critical",assignee:"Jessica L.",tags:["api","payment"],column_id:"in-progress",order_index:0},{id:"task-5",title:"User Authentication",description:"Implement secure user authentication system",priority:"High",assignee:"David C.",tags:["auth","security"],column_id:"done",order_index:0}]);if(e)return console.error("Error inserting sample tasks:",e),t.status(500).json({success:!1,error:`Failed to insert sample tasks: ${e.message}`});console.log("Sample tasks inserted successfully")}let{data:r}=await n.pR.from("task_columns").select("*").order("order_index"),{data:a}=await n.pR.from("tasks").select("*").order("order_index");t.status(200).json({success:!0,message:"Tasks database setup completed successfully",columns:r?.length||0,tasks:a?.length||0,data:{columns:r,tasks:a}})}catch(e){console.error("Setup tasks database error:",e),t.status(500).json({success:!1,error:e instanceof Error?e.message:"Failed to setup tasks database"})}}let c=(0,o.l)(i,"default"),l=(0,o.l)(i,"config"),u=new r.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/setup-tasks-database",pathname:"/api/setup-tasks-database",bundlePath:"",filename:""},userland:i})},6137:(e,t,s)=>{s.d(t,{OQ:()=>o,pR:()=>n});let i=require("@supabase/supabase-js"),r="https://tfskdfkzhqiiamziggoB.supabase.co",a=process.env.SUPABASE_SERVICE_ROLE_KEY,o=(0,i.createClient)(r,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmc2tkZmt6aHFpaWFtemlnZ29iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0Nzc3ODksImV4cCI6MjA2NTA1Mzc4OX0.wUR1GCbNEMrjcVRNG0l03Y0uXDgxd1y7wfAIGxSz5kA",{auth:{autoRefreshToken:!0,persistSession:!0},global:{fetch:(e,t={})=>fetch(e,{...t,signal:AbortSignal.timeout(3e4)})}}),n=(0,i.createClient)(r,a,{auth:{autoRefreshToken:!1,persistSession:!1},global:{fetch:(e,t={})=>fetch(e,{...t,signal:AbortSignal.timeout(45e3)})}})},7153:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},1802:(e,t,s)=>{e.exports=s(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var s=t(t.s=5425);module.exports=s})();