"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/test-supabase-connection";
exports.ids = ["pages/api/test-supabase-connection"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftest-supabase-connection&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ftest-supabase-connection.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftest-supabase-connection&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ftest-supabase-connection.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_test_supabase_connection_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/test-supabase-connection.ts */ \"(api)/./pages/api/test-supabase-connection.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_test_supabase_connection_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_test_supabase_connection_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/test-supabase-connection\",\n        pathname: \"/api/test-supabase-connection\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_test_supabase_connection_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnRlc3Qtc3VwYWJhc2UtY29ubmVjdGlvbiZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGdGVzdC1zdXBhYmFzZS1jb25uZWN0aW9uLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29FO0FBQ3BFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxtRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsbUVBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9uaXRleWVpbnRyYW5ldC8/NzA2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3Rlc3Qtc3VwYWJhc2UtY29ubmVjdGlvbi50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Rlc3Qtc3VwYWJhc2UtY29ubmVjdGlvblwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Rlc3Qtc3VwYWJhc2UtY29ubmVjdGlvblwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftest-supabase-connection&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ftest-supabase-connection.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   retrySupabaseOperation: () => (/* binding */ retrySupabaseOperation),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://tfskdfkzhqiiamziggoB.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmc2tkZmt6aHFpaWFtemlnZ29iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0Nzc3ODksImV4cCI6MjA2NTA1Mzc4OX0.wUR1GCbNEMrjcVRNG0l03Y0uXDgxd1y7wfAIGxSz5kA\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n// Client for browser/client-side operations\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: true,\n        persistSession: true\n    },\n    global: {\n        fetch: (url, options = {})=>{\n            return fetch(url, {\n                ...options,\n                // Add timeout and retry logic\n                signal: AbortSignal.timeout(30000)\n            });\n        }\n    }\n});\n// Admin client for server-side operations (bypasses RLS)\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    },\n    global: {\n        fetch: (url, options = {})=>{\n            return fetch(url, {\n                ...options,\n                // Add timeout for admin operations\n                signal: AbortSignal.timeout(45000)\n            });\n        }\n    }\n});\n// Helper function for retrying Supabase operations\nasync function retrySupabaseOperation(operation, maxRetries = 3, delay = 1000) {\n    let lastError;\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            return await operation();\n        } catch (error) {\n            lastError = error instanceof Error ? error : new Error(\"Unknown error\");\n            if (attempt === maxRetries) {\n                throw lastError;\n            }\n            console.log(`Supabase operation failed (attempt ${attempt}/${maxRetries}), retrying in ${delay}ms...`);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n            delay *= 2; // Exponential backoff\n        }\n    }\n    throw lastError;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLHFCQUFxQkwsUUFBUUMsR0FBRyxDQUFDSyx5QkFBeUI7QUFFaEUsNENBQTRDO0FBQ3JDLE1BQU1DLFdBQVdULG1FQUFZQSxDQUFDQyxhQUFhSSxpQkFBaUI7SUFDakVLLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7SUFDQUMsUUFBUTtRQUNOQyxPQUFPLENBQUNDLEtBQUtDLFVBQVUsQ0FBQyxDQUFDO1lBQ3ZCLE9BQU9GLE1BQU1DLEtBQUs7Z0JBQ2hCLEdBQUdDLE9BQU87Z0JBQ1YsOEJBQThCO2dCQUM5QkMsUUFBUUMsWUFBWUMsT0FBTyxDQUFDO1lBQzlCO1FBQ0Y7SUFDRjtBQUNGLEdBQUU7QUFFRix5REFBeUQ7QUFDbEQsTUFBTUMsZ0JBQWdCcEIsbUVBQVlBLENBQUNDLGFBQWFNLG9CQUFvQjtJQUN6RUcsTUFBTTtRQUNKQyxrQkFBa0I7UUFDbEJDLGdCQUFnQjtJQUNsQjtJQUNBQyxRQUFRO1FBQ05DLE9BQU8sQ0FBQ0MsS0FBS0MsVUFBVSxDQUFDLENBQUM7WUFDdkIsT0FBT0YsTUFBTUMsS0FBSztnQkFDaEIsR0FBR0MsT0FBTztnQkFDVixtQ0FBbUM7Z0JBQ25DQyxRQUFRQyxZQUFZQyxPQUFPLENBQUM7WUFDOUI7UUFDRjtJQUNGO0FBQ0YsR0FBRTtBQUVGLG1EQUFtRDtBQUM1QyxlQUFlRSx1QkFDcEJDLFNBQTJCLEVBQzNCQyxhQUFxQixDQUFDLEVBQ3RCQyxRQUFnQixJQUFJO0lBRXBCLElBQUlDO0lBRUosSUFBSyxJQUFJQyxVQUFVLEdBQUdBLFdBQVdILFlBQVlHLFVBQVc7UUFDdEQsSUFBSTtZQUNGLE9BQU8sTUFBTUo7UUFDZixFQUFFLE9BQU9LLE9BQU87WUFDZEYsWUFBWUUsaUJBQWlCQyxRQUFRRCxRQUFRLElBQUlDLE1BQU07WUFFdkQsSUFBSUYsWUFBWUgsWUFBWTtnQkFDMUIsTUFBTUU7WUFDUjtZQUVBSSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRUosUUFBUSxDQUFDLEVBQUVILFdBQVcsZUFBZSxFQUFFQyxNQUFNLEtBQUssQ0FBQztZQUNyRyxNQUFNLElBQUlPLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVNSO1lBQ2pEQSxTQUFTLEdBQUcsc0JBQXNCO1FBQ3BDO0lBQ0Y7SUFFQSxNQUFNQztBQUNSIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9uaXRleWVpbnRyYW5ldC8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSFcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhXG5cbi8vIENsaWVudCBmb3IgYnJvd3Nlci9jbGllbnQtc2lkZSBvcGVyYXRpb25zXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSwge1xuICBhdXRoOiB7XG4gICAgYXV0b1JlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICBwZXJzaXN0U2Vzc2lvbjogdHJ1ZVxuICB9LFxuICBnbG9iYWw6IHtcbiAgICBmZXRjaDogKHVybCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIC8vIEFkZCB0aW1lb3V0IGFuZCByZXRyeSBsb2dpY1xuICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMzAwMDApLCAvLyAzMCBzZWNvbmQgdGltZW91dFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSxcbn0pXG5cbi8vIEFkbWluIGNsaWVudCBmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9ucyAoYnlwYXNzZXMgUkxTKVxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSwge1xuICBhdXRoOiB7XG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXG4gIH0sXG4gIGdsb2JhbDoge1xuICAgIGZldGNoOiAodXJsLCBvcHRpb25zID0ge30pID0+IHtcbiAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgLy8gQWRkIHRpbWVvdXQgZm9yIGFkbWluIG9wZXJhdGlvbnNcbiAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDQ1MDAwKSwgLy8gNDUgc2Vjb25kIHRpbWVvdXQgZm9yIGFkbWluIG9wZXJhdGlvbnNcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0sXG59KVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gZm9yIHJldHJ5aW5nIFN1cGFiYXNlIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeVN1cGFiYXNlT3BlcmF0aW9uPFQ+KFxuICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gIG1heFJldHJpZXM6IG51bWJlciA9IDMsXG4gIGRlbGF5OiBudW1iZXIgPSAxMDAwXG4pOiBQcm9taXNlPFQ+IHtcbiAgbGV0IGxhc3RFcnJvcjogRXJyb3I7XG4gIFxuICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKTtcbiAgICAgIFxuICAgICAgaWYgKGF0dGVtcHQgPT09IG1heFJldHJpZXMpIHtcbiAgICAgICAgdGhyb3cgbGFzdEVycm9yO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgU3VwYWJhc2Ugb3BlcmF0aW9uIGZhaWxlZCAoYXR0ZW1wdCAke2F0dGVtcHR9LyR7bWF4UmV0cmllc30pLCByZXRyeWluZyBpbiAke2RlbGF5fW1zLi4uYCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTtcbiAgICAgIGRlbGF5ICo9IDI7IC8vIEV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICB9XG4gIH1cbiAgXG4gIHRocm93IGxhc3RFcnJvciE7XG59XG5cbi8vIFR5cGVzIGZvciBvdXIgZGF0YWJhc2UgdGFibGVzXG5leHBvcnQgaW50ZXJmYWNlIFJldmVudWVEYXRhIHtcbiAgaWQ6IG51bWJlclxuICBtb250aDogc3RyaW5nXG4gIHJldmVudWU6IG51bWJlclxuICB5ZWFyOiBudW1iZXJcbiAgbW9udGhfbnVtYmVyOiBudW1iZXJcbiAgaW52b2ljZV9jb3VudDogbnVtYmVyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xuICB1cGRhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnZvaWNlIHtcbiAgaWQ6IG51bWJlclxuICBpbnZvaWNlX2RhdGU6IHN0cmluZ1xuICBhbW91bnQ6IG51bWJlclxuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xuICBtb250aF9yZWZlcmVuY2U6IHN0cmluZ1xuICB1cGxvYWRfYmF0Y2hfaWQ/OiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkQmF0Y2gge1xuICBpZDogc3RyaW5nXG4gIGZpbGVuYW1lPzogc3RyaW5nXG4gIHRvdGFsX2ludm9pY2VzOiBudW1iZXJcbiAgdG90YWxfYW1vdW50OiBudW1iZXJcbiAgbW9udGhzX2dlbmVyYXRlZDogbnVtYmVyXG4gIGRhdGVfcmFuZ2Vfc3RhcnQ6IHN0cmluZ1xuICBkYXRlX3JhbmdlX2VuZDogc3RyaW5nXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xufSAiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwic3VwYWJhc2UiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZ2xvYmFsIiwiZmV0Y2giLCJ1cmwiLCJvcHRpb25zIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJ0aW1lb3V0Iiwic3VwYWJhc2VBZG1pbiIsInJldHJ5U3VwYWJhc2VPcGVyYXRpb24iLCJvcGVyYXRpb24iLCJtYXhSZXRyaWVzIiwiZGVsYXkiLCJsYXN0RXJyb3IiLCJhdHRlbXB0IiwiZXJyb3IiLCJFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.ts\n");

/***/ }),

/***/ "(api)/./pages/api/test-supabase-connection.ts":
/*!***********************************************!*\
  !*** ./pages/api/test-supabase-connection.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/supabase */ \"(api)/./lib/supabase.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"=== SUPABASE CONNECTION DIAGNOSTIC ===\");\n        // Test environment variables\n        const envCheck = {\n            NEXT_PUBLIC_SUPABASE_URL: !!\"https://tfskdfkzhqiiamziggoB.supabase.co\",\n            NEXT_PUBLIC_SUPABASE_ANON_KEY: !!\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmc2tkZmt6aHFpaWFtemlnZ29iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0Nzc3ODksImV4cCI6MjA2NTA1Mzc4OX0.wUR1GCbNEMrjcVRNG0l03Y0uXDgxd1y7wfAIGxSz5kA\",\n            SUPABASE_SERVICE_ROLE_KEY: !!process.env.SUPABASE_SERVICE_ROLE_KEY,\n            url: \"https://tfskdfkzhqiiamziggoB.supabase.co\"?.substring(0, 30) + \"...\"\n        };\n        console.log(\"Environment variables:\", envCheck);\n        // Test basic connectivity\n        const { data: healthData, error: healthError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"health_check\").select(\"*\").limit(1);\n        console.log(\"Health check result:\", {\n            healthData,\n            healthError\n        });\n        // Test table existence with simple queries\n        const tables = [\n            \"upload_batches\",\n            \"invoices\",\n            \"revenue_data\"\n        ];\n        const tableTests = {};\n        for (const table of tables){\n            try {\n                const { data, error, count } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(table).select(\"*\", {\n                    count: \"exact\",\n                    head: true\n                });\n                tableTests[table] = {\n                    exists: !error,\n                    error: error?.message || null,\n                    count: count || 0\n                };\n            } catch (err) {\n                const errorMessage = err instanceof Error ? err.message : \"Unknown error\";\n                tableTests[table] = {\n                    exists: false,\n                    error: errorMessage,\n                    count: 0\n                };\n            }\n        }\n        console.log(\"Table test results:\", tableTests);\n        return res.status(200).json({\n            success: true,\n            environment: envCheck,\n            tables: tableTests,\n            message: \"Connection test completed\"\n        });\n    } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n        const errorStack = error instanceof Error ? error.stack : undefined;\n        console.error(\"Connection test error:\", error);\n        return res.status(500).json({\n            success: false,\n            error: errorMessage,\n            details: errorStack,\n            message: \"Connection test failed\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdGVzdC1zdXBhYmFzZS1jb25uZWN0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQzZEO0FBUTlDLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosNkJBQTZCO1FBQzdCLE1BQU1DLFdBQVc7WUFDZkMsMEJBQTBCLENBQUMsQ0FBQ0MsMENBQW9DO1lBQ2hFRSwrQkFBK0IsQ0FBQyxDQUFDRixrTkFBeUM7WUFDMUVHLDJCQUEyQixDQUFDLENBQUNILFFBQVFDLEdBQUcsQ0FBQ0UseUJBQXlCO1lBQ2xFQyxLQUFLSiwwQ0FBb0MsRUFBRUssVUFBVSxHQUFHLE1BQU07UUFDaEU7UUFFQVQsUUFBUUMsR0FBRyxDQUFDLDBCQUEwQkM7UUFFdEMsMEJBQTBCO1FBQzFCLE1BQU0sRUFBRVEsTUFBTUMsVUFBVSxFQUFFWixPQUFPYSxXQUFXLEVBQUUsR0FBRyxNQUFNcEIsd0RBQWFBLENBQ2pFcUIsSUFBSSxDQUFDLGdCQUNMQyxNQUFNLENBQUMsS0FDUEMsS0FBSyxDQUFDO1FBRVRmLFFBQVFDLEdBQUcsQ0FBQyx3QkFBd0I7WUFBRVU7WUFBWUM7UUFBWTtRQUU5RCwyQ0FBMkM7UUFDM0MsTUFBTUksU0FBUztZQUFDO1lBQWtCO1lBQVk7U0FBZTtRQUM3RCxNQUFNQyxhQUF3QyxDQUFDO1FBRS9DLEtBQUssTUFBTUMsU0FBU0YsT0FBUTtZQUMxQixJQUFJO2dCQUNGLE1BQU0sRUFBRU4sSUFBSSxFQUFFWCxLQUFLLEVBQUVvQixLQUFLLEVBQUUsR0FBRyxNQUFNM0Isd0RBQWFBLENBQy9DcUIsSUFBSSxDQUFDSyxPQUNMSixNQUFNLENBQUMsS0FBSztvQkFBRUssT0FBTztvQkFBU0MsTUFBTTtnQkFBSztnQkFFNUNILFVBQVUsQ0FBQ0MsTUFBTSxHQUFHO29CQUNsQkcsUUFBUSxDQUFDdEI7b0JBQ1RBLE9BQU9BLE9BQU91QixXQUFXO29CQUN6QkgsT0FBT0EsU0FBUztnQkFDbEI7WUFDRixFQUFFLE9BQU9JLEtBQUs7Z0JBQ1osTUFBTUMsZUFBZUQsZUFBZUUsUUFBUUYsSUFBSUQsT0FBTyxHQUFHO2dCQUMxREwsVUFBVSxDQUFDQyxNQUFNLEdBQUc7b0JBQ2xCRyxRQUFRO29CQUNSdEIsT0FBT3lCO29CQUNQTCxPQUFPO2dCQUNUO1lBQ0Y7UUFDRjtRQUVBbkIsUUFBUUMsR0FBRyxDQUFDLHVCQUF1QmdCO1FBRW5DLE9BQU90QixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCNEIsU0FBUztZQUNUQyxhQUFhekI7WUFDYmMsUUFBUUM7WUFDUkssU0FBUztRQUNYO0lBRUYsRUFBRSxPQUFPdkIsT0FBTztRQUNkLE1BQU15QixlQUFlekIsaUJBQWlCMEIsUUFBUTFCLE1BQU11QixPQUFPLEdBQUc7UUFDOUQsTUFBTU0sYUFBYTdCLGlCQUFpQjBCLFFBQVExQixNQUFNOEIsS0FBSyxHQUFHQztRQUMxRDlCLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUI0QixTQUFTO1lBQ1QzQixPQUFPeUI7WUFDUE8sU0FBU0g7WUFDVE4sU0FBUztRQUNYO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL21vbml0ZXllaW50cmFuZXQvLi9wYWdlcy9hcGkvdGVzdC1zdXBhYmFzZS1jb25uZWN0aW9uLnRzPzE5NDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBzdXBhYmFzZSwgc3VwYWJhc2VBZG1pbiB9IGZyb20gJy4uLy4uL2xpYi9zdXBhYmFzZSc7XG5cbmludGVyZmFjZSBUYWJsZVRlc3Qge1xuICBleGlzdHM6IGJvb2xlYW47XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xuICBjb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJz09PSBTVVBBQkFTRSBDT05ORUNUSU9OIERJQUdOT1NUSUMgPT09Jyk7XG4gICAgXG4gICAgLy8gVGVzdCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICBjb25zdCBlbnZDaGVjayA9IHtcbiAgICAgIE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDogISFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXG4gICAgICBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTogISFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSxcbiAgICAgIFNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVk6ICEhcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSxcbiAgICAgIHVybDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMPy5zdWJzdHJpbmcoMCwgMzApICsgJy4uLicsXG4gICAgfTtcblxuICAgIGNvbnNvbGUubG9nKCdFbnZpcm9ubWVudCB2YXJpYWJsZXM6JywgZW52Q2hlY2spO1xuXG4gICAgLy8gVGVzdCBiYXNpYyBjb25uZWN0aXZpdHlcbiAgICBjb25zdCB7IGRhdGE6IGhlYWx0aERhdGEsIGVycm9yOiBoZWFsdGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ2hlYWx0aF9jaGVjaycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5saW1pdCgxKTtcblxuICAgIGNvbnNvbGUubG9nKCdIZWFsdGggY2hlY2sgcmVzdWx0OicsIHsgaGVhbHRoRGF0YSwgaGVhbHRoRXJyb3IgfSk7XG5cbiAgICAvLyBUZXN0IHRhYmxlIGV4aXN0ZW5jZSB3aXRoIHNpbXBsZSBxdWVyaWVzXG4gICAgY29uc3QgdGFibGVzID0gWyd1cGxvYWRfYmF0Y2hlcycsICdpbnZvaWNlcycsICdyZXZlbnVlX2RhdGEnXTtcbiAgICBjb25zdCB0YWJsZVRlc3RzOiBSZWNvcmQ8c3RyaW5nLCBUYWJsZVRlc3Q+ID0ge307XG5cbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIHRhYmxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciwgY291bnQgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAuZnJvbSh0YWJsZSlcbiAgICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KTtcbiAgICAgICAgXG4gICAgICAgIHRhYmxlVGVzdHNbdGFibGVdID0ge1xuICAgICAgICAgIGV4aXN0czogIWVycm9yLFxuICAgICAgICAgIGVycm9yOiBlcnJvcj8ubWVzc2FnZSB8fCBudWxsLFxuICAgICAgICAgIGNvdW50OiBjb3VudCB8fCAwXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgdGFibGVUZXN0c1t0YWJsZV0gPSB7XG4gICAgICAgICAgZXhpc3RzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlLFxuICAgICAgICAgIGNvdW50OiAwXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1RhYmxlIHRlc3QgcmVzdWx0czonLCB0YWJsZVRlc3RzKTtcblxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZW52aXJvbm1lbnQ6IGVudkNoZWNrLFxuICAgICAgdGFibGVzOiB0YWJsZVRlc3RzLFxuICAgICAgbWVzc2FnZTogJ0Nvbm5lY3Rpb24gdGVzdCBjb21wbGV0ZWQnXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICBjb25zdCBlcnJvclN0YWNrID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogdW5kZWZpbmVkO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Nvbm5lY3Rpb24gdGVzdCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgIGRldGFpbHM6IGVycm9yU3RhY2ssXG4gICAgICBtZXNzYWdlOiAnQ29ubmVjdGlvbiB0ZXN0IGZhaWxlZCdcbiAgICB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsic3VwYWJhc2VBZG1pbiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZW52Q2hlY2siLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwidXJsIiwic3Vic3RyaW5nIiwiZGF0YSIsImhlYWx0aERhdGEiLCJoZWFsdGhFcnJvciIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsInRhYmxlcyIsInRhYmxlVGVzdHMiLCJ0YWJsZSIsImNvdW50IiwiaGVhZCIsImV4aXN0cyIsIm1lc3NhZ2UiLCJlcnIiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsInN1Y2Nlc3MiLCJlbnZpcm9ubWVudCIsImVycm9yU3RhY2siLCJzdGFjayIsInVuZGVmaW5lZCIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/test-supabase-connection.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftest-supabase-connection&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ftest-supabase-connection.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();