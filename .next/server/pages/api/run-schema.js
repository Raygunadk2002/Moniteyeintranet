"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/run-schema";
exports.ids = ["pages/api/run-schema"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frun-schema&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frun-schema.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frun-schema&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frun-schema.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_run_schema_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/run-schema.ts */ \"(api)/./pages/api/run-schema.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_run_schema_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_run_schema_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/run-schema\",\n        pathname: \"/api/run-schema\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_run_schema_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnJ1bi1zY2hlbWEmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnJ1bi1zY2hlbWEudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDc0Q7QUFDdEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHFEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxxREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb25pdGV5ZWludHJhbmV0Lz8wODI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvcnVuLXNjaGVtYS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3J1bi1zY2hlbWFcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ydW4tc2NoZW1hXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frun-schema&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frun-schema.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   retrySupabaseOperation: () => (/* binding */ retrySupabaseOperation),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://tfskdfkzhqiiamziggoB.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRmc2tkZmt6aHFpaWFtemlnZ29iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0Nzc3ODksImV4cCI6MjA2NTA1Mzc4OX0.wUR1GCbNEMrjcVRNG0l03Y0uXDgxd1y7wfAIGxSz5kA\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n// Client for browser/client-side operations\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: true,\n        persistSession: true\n    },\n    global: {\n        fetch: (url, options = {})=>{\n            return fetch(url, {\n                ...options,\n                // Add timeout and retry logic\n                signal: AbortSignal.timeout(30000)\n            });\n        }\n    }\n});\n// Admin client for server-side operations (bypasses RLS)\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    },\n    global: {\n        fetch: (url, options = {})=>{\n            return fetch(url, {\n                ...options,\n                // Add timeout for admin operations\n                signal: AbortSignal.timeout(45000)\n            });\n        }\n    }\n});\n// Helper function for retrying Supabase operations\nasync function retrySupabaseOperation(operation, maxRetries = 3, delay = 1000) {\n    let lastError;\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            return await operation();\n        } catch (error) {\n            lastError = error instanceof Error ? error : new Error(\"Unknown error\");\n            if (attempt === maxRetries) {\n                throw lastError;\n            }\n            console.log(`Supabase operation failed (attempt ${attempt}/${maxRetries}), retrying in ${delay}ms...`);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n            delay *= 2; // Exponential backoff\n        }\n    }\n    throw lastError;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0Q7QUFFcEQsTUFBTUMsY0FBY0MsMENBQW9DO0FBQ3hELE1BQU1HLGtCQUFrQkgsa05BQXlDO0FBQ2pFLE1BQU1LLHFCQUFxQkwsUUFBUUMsR0FBRyxDQUFDSyx5QkFBeUI7QUFFaEUsNENBQTRDO0FBQ3JDLE1BQU1DLFdBQVdULG1FQUFZQSxDQUFDQyxhQUFhSSxpQkFBaUI7SUFDakVLLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7SUFDQUMsUUFBUTtRQUNOQyxPQUFPLENBQUNDLEtBQUtDLFVBQVUsQ0FBQyxDQUFDO1lBQ3ZCLE9BQU9GLE1BQU1DLEtBQUs7Z0JBQ2hCLEdBQUdDLE9BQU87Z0JBQ1YsOEJBQThCO2dCQUM5QkMsUUFBUUMsWUFBWUMsT0FBTyxDQUFDO1lBQzlCO1FBQ0Y7SUFDRjtBQUNGLEdBQUU7QUFFRix5REFBeUQ7QUFDbEQsTUFBTUMsZ0JBQWdCcEIsbUVBQVlBLENBQUNDLGFBQWFNLG9CQUFvQjtJQUN6RUcsTUFBTTtRQUNKQyxrQkFBa0I7UUFDbEJDLGdCQUFnQjtJQUNsQjtJQUNBQyxRQUFRO1FBQ05DLE9BQU8sQ0FBQ0MsS0FBS0MsVUFBVSxDQUFDLENBQUM7WUFDdkIsT0FBT0YsTUFBTUMsS0FBSztnQkFDaEIsR0FBR0MsT0FBTztnQkFDVixtQ0FBbUM7Z0JBQ25DQyxRQUFRQyxZQUFZQyxPQUFPLENBQUM7WUFDOUI7UUFDRjtJQUNGO0FBQ0YsR0FBRTtBQUVGLG1EQUFtRDtBQUM1QyxlQUFlRSx1QkFDcEJDLFNBQTJCLEVBQzNCQyxhQUFxQixDQUFDLEVBQ3RCQyxRQUFnQixJQUFJO0lBRXBCLElBQUlDO0lBRUosSUFBSyxJQUFJQyxVQUFVLEdBQUdBLFdBQVdILFlBQVlHLFVBQVc7UUFDdEQsSUFBSTtZQUNGLE9BQU8sTUFBTUo7UUFDZixFQUFFLE9BQU9LLE9BQU87WUFDZEYsWUFBWUUsaUJBQWlCQyxRQUFRRCxRQUFRLElBQUlDLE1BQU07WUFFdkQsSUFBSUYsWUFBWUgsWUFBWTtnQkFDMUIsTUFBTUU7WUFDUjtZQUVBSSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRUosUUFBUSxDQUFDLEVBQUVILFdBQVcsZUFBZSxFQUFFQyxNQUFNLEtBQUssQ0FBQztZQUNyRyxNQUFNLElBQUlPLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVNSO1lBQ2pEQSxTQUFTLEdBQUcsc0JBQXNCO1FBQ3BDO0lBQ0Y7SUFFQSxNQUFNQztBQUNSIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9uaXRleWVpbnRyYW5ldC8uL2xpYi9zdXBhYmFzZS50cz9jOTlmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhXG5jb25zdCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSFcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhXG5cbi8vIENsaWVudCBmb3IgYnJvd3Nlci9jbGllbnQtc2lkZSBvcGVyYXRpb25zXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSwge1xuICBhdXRoOiB7XG4gICAgYXV0b1JlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICBwZXJzaXN0U2Vzc2lvbjogdHJ1ZVxuICB9LFxuICBnbG9iYWw6IHtcbiAgICBmZXRjaDogKHVybCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgICByZXR1cm4gZmV0Y2godXJsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIC8vIEFkZCB0aW1lb3V0IGFuZCByZXRyeSBsb2dpY1xuICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMzAwMDApLCAvLyAzMCBzZWNvbmQgdGltZW91dFxuICAgICAgfSk7XG4gICAgfSxcbiAgfSxcbn0pXG5cbi8vIEFkbWluIGNsaWVudCBmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9ucyAoYnlwYXNzZXMgUkxTKVxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSwge1xuICBhdXRoOiB7XG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXG4gIH0sXG4gIGdsb2JhbDoge1xuICAgIGZldGNoOiAodXJsLCBvcHRpb25zID0ge30pID0+IHtcbiAgICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgLy8gQWRkIHRpbWVvdXQgZm9yIGFkbWluIG9wZXJhdGlvbnNcbiAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KDQ1MDAwKSwgLy8gNDUgc2Vjb25kIHRpbWVvdXQgZm9yIGFkbWluIG9wZXJhdGlvbnNcbiAgICAgIH0pO1xuICAgIH0sXG4gIH0sXG59KVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gZm9yIHJldHJ5aW5nIFN1cGFiYXNlIG9wZXJhdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeVN1cGFiYXNlT3BlcmF0aW9uPFQ+KFxuICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gIG1heFJldHJpZXM6IG51bWJlciA9IDMsXG4gIGRlbGF5OiBudW1iZXIgPSAxMDAwXG4pOiBQcm9taXNlPFQ+IHtcbiAgbGV0IGxhc3RFcnJvcjogRXJyb3I7XG4gIFxuICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IG9wZXJhdGlvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsYXN0RXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoJ1Vua25vd24gZXJyb3InKTtcbiAgICAgIFxuICAgICAgaWYgKGF0dGVtcHQgPT09IG1heFJldHJpZXMpIHtcbiAgICAgICAgdGhyb3cgbGFzdEVycm9yO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgU3VwYWJhc2Ugb3BlcmF0aW9uIGZhaWxlZCAoYXR0ZW1wdCAke2F0dGVtcHR9LyR7bWF4UmV0cmllc30pLCByZXRyeWluZyBpbiAke2RlbGF5fW1zLi4uYCk7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKTtcbiAgICAgIGRlbGF5ICo9IDI7IC8vIEV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICB9XG4gIH1cbiAgXG4gIHRocm93IGxhc3RFcnJvciE7XG59XG5cbi8vIFR5cGVzIGZvciBvdXIgZGF0YWJhc2UgdGFibGVzXG5leHBvcnQgaW50ZXJmYWNlIFJldmVudWVEYXRhIHtcbiAgaWQ6IG51bWJlclxuICBtb250aDogc3RyaW5nXG4gIHJldmVudWU6IG51bWJlclxuICB5ZWFyOiBudW1iZXJcbiAgbW9udGhfbnVtYmVyOiBudW1iZXJcbiAgaW52b2ljZV9jb3VudDogbnVtYmVyXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xuICB1cGRhdGVkX2F0OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnZvaWNlIHtcbiAgaWQ6IG51bWJlclxuICBpbnZvaWNlX2RhdGU6IHN0cmluZ1xuICBhbW91bnQ6IG51bWJlclxuICBkZXNjcmlwdGlvbj86IHN0cmluZ1xuICBtb250aF9yZWZlcmVuY2U6IHN0cmluZ1xuICB1cGxvYWRfYmF0Y2hfaWQ/OiBzdHJpbmdcbiAgY3JlYXRlZF9hdDogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXBsb2FkQmF0Y2gge1xuICBpZDogc3RyaW5nXG4gIGZpbGVuYW1lPzogc3RyaW5nXG4gIHRvdGFsX2ludm9pY2VzOiBudW1iZXJcbiAgdG90YWxfYW1vdW50OiBudW1iZXJcbiAgbW9udGhzX2dlbmVyYXRlZDogbnVtYmVyXG4gIGRhdGVfcmFuZ2Vfc3RhcnQ6IHN0cmluZ1xuICBkYXRlX3JhbmdlX2VuZDogc3RyaW5nXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZ1xufSAiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwic3VwYWJhc2UiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiZ2xvYmFsIiwiZmV0Y2giLCJ1cmwiLCJvcHRpb25zIiwic2lnbmFsIiwiQWJvcnRTaWduYWwiLCJ0aW1lb3V0Iiwic3VwYWJhc2VBZG1pbiIsInJldHJ5U3VwYWJhc2VPcGVyYXRpb24iLCJvcGVyYXRpb24iLCJtYXhSZXRyaWVzIiwiZGVsYXkiLCJsYXN0RXJyb3IiLCJhdHRlbXB0IiwiZXJyb3IiLCJFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.ts\n");

/***/ }),

/***/ "(api)/./pages/api/run-schema.ts":
/*!*********************************!*\
  !*** ./pages/api/run-schema.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/supabase */ \"(api)/./lib/supabase.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        console.log(\"Starting schema execution...\");\n        // Step 1: Create tables\n        const createTablesSQL = `\n      -- Table to store upload batch metadata\n      CREATE TABLE IF NOT EXISTS upload_batches (\n        id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\n        filename text,\n        total_invoices integer NOT NULL,\n        total_amount numeric(10,2) NOT NULL,\n        months_generated integer NOT NULL,\n        date_range_start date NOT NULL,\n        date_range_end date NOT NULL,\n        created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n        updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n      );\n\n      -- Table to store individual invoice records\n      CREATE TABLE IF NOT EXISTS invoices (\n        id bigint PRIMARY KEY GENERATED ALWAYS AS IDENTITY,\n        invoice_date date NOT NULL,\n        amount numeric(10,2) NOT NULL,\n        description text,\n        month_reference text NOT NULL,\n        upload_batch_id uuid REFERENCES upload_batches(id) ON DELETE CASCADE,\n        created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n      );\n\n      -- Table to store aggregated monthly revenue data\n      CREATE TABLE IF NOT EXISTS revenue_data (\n        id bigint PRIMARY KEY GENERATED ALWAYS AS IDENTITY,\n        month text NOT NULL,\n        revenue numeric(10,2) NOT NULL,\n        year integer NOT NULL,\n        month_number integer NOT NULL CHECK (month_number >= 1 AND month_number <= 12),\n        invoice_count integer NOT NULL DEFAULT 0,\n        created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n        updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n      );\n\n      -- Table to store task columns (Kanban board columns)\n      CREATE TABLE IF NOT EXISTS task_columns (\n        id text PRIMARY KEY,\n        title text NOT NULL,\n        order_index integer NOT NULL DEFAULT 0,\n        created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n        updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n      );\n\n      -- Table to store tasks\n      CREATE TABLE IF NOT EXISTS tasks (\n        id text PRIMARY KEY,\n        title text NOT NULL,\n        description text,\n        priority text CHECK (priority IN ('Low', 'Medium', 'High', 'Critical')) DEFAULT 'Medium',\n        assignee text,\n        tags text[] DEFAULT '{}',\n        column_id text NOT NULL REFERENCES task_columns(id) ON DELETE CASCADE,\n        order_index integer NOT NULL DEFAULT 0,\n        created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n        updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n      );\n    `;\n        // Execute table creation\n        const { error: tablesError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc(\"exec_sql\", {\n            sql: createTablesSQL\n        });\n        if (tablesError) {\n            console.log(\"Tables creation completed (tables might already exist)\");\n        }\n        // Step 2: Create indexes\n        const createIndexesSQL = `\n      CREATE INDEX IF NOT EXISTS idx_invoices_date ON invoices(invoice_date);\n      CREATE INDEX IF NOT EXISTS idx_invoices_month_ref ON invoices(month_reference);\n      CREATE INDEX IF NOT EXISTS idx_invoices_batch ON invoices(upload_batch_id);\n      CREATE INDEX IF NOT EXISTS idx_revenue_year_month ON revenue_data(year, month_number);\n      CREATE INDEX IF NOT EXISTS idx_tasks_column ON tasks(column_id);\n      CREATE INDEX IF NOT EXISTS idx_tasks_priority ON tasks(priority);\n      CREATE INDEX IF NOT EXISTS idx_tasks_assignee ON tasks(assignee);\n      CREATE INDEX IF NOT EXISTS idx_task_columns_order ON task_columns(order_index);\n      CREATE INDEX IF NOT EXISTS idx_tasks_order ON tasks(order_index);\n    `;\n        const { error: indexesError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc(\"exec_sql\", {\n            sql: createIndexesSQL\n        });\n        if (indexesError) {\n            console.log(\"Indexes creation completed\");\n        }\n        // Step 3: Insert default data\n        const insertDefaultDataSQL = `\n      INSERT INTO task_columns (id, title, order_index) VALUES\n      ('backlog', '📋 Backlog', 0),\n      ('todo', '📝 To Do', 1),\n      ('in-progress', '🔄 In Progress', 2),\n      ('review', '👀 Review', 3),\n      ('done', '✅ Done', 4)\n      ON CONFLICT (id) DO NOTHING;\n\n      INSERT INTO tasks (id, title, description, priority, assignee, tags, column_id, order_index) VALUES\n      ('task-1', 'System Performance Audit', 'Complete comprehensive review of system performance metrics and identify bottlenecks', 'High', 'Alex K.', ARRAY['performance', 'audit'], 'backlog', 0),\n      ('task-2', 'Update Security Protocols', 'Review and update all security protocols according to latest compliance standards', 'Medium', 'Sarah M.', ARRAY['security', 'compliance'], 'backlog', 1),\n      ('task-3', 'Database Optimization', 'Optimize database queries and indexing for better performance', 'Low', 'Mike R.', ARRAY['database', 'optimization'], 'todo', 0),\n      ('task-4', 'API Integration', 'Integrate third-party payment gateway API', 'Critical', 'Jessica L.', ARRAY['api', 'payment'], 'in-progress', 0),\n      ('task-5', 'User Authentication', 'Implement secure user authentication system', 'High', 'David C.', ARRAY['auth', 'security'], 'done', 0)\n      ON CONFLICT (id) DO NOTHING;\n    `;\n        const { error: dataError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc(\"exec_sql\", {\n            sql: insertDefaultDataSQL\n        });\n        if (dataError) {\n            console.log(\"Default data insertion completed\");\n        }\n        // Step 4: Test the tables by querying them\n        const { data: columns, error: columnsError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"task_columns\").select(\"*\").order(\"order_index\");\n        const { data: tasks, error: tasksError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"tasks\").select(\"*\").order(\"order_index\");\n        if (columnsError || tasksError) {\n            throw new Error(`Table query failed: ${columnsError?.message || tasksError?.message}`);\n        }\n        console.log(\"Schema execution completed successfully\");\n        return res.status(200).json({\n            success: true,\n            message: \"Schema executed successfully\",\n            data: {\n                columns: columns?.length || 0,\n                tasks: tasks?.length || 0,\n                columnsData: columns,\n                tasksData: tasks\n            }\n        });\n    } catch (error) {\n        console.error(\"Schema execution error:\", error);\n        return res.status(500).json({\n            success: false,\n            error: error.message,\n            details: error\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcnVuLXNjaGVtYS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQUUvQixlQUFlQyxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUI7SUFDNUQ7SUFFQSxJQUFJO1FBQ0ZDLFFBQVFDLEdBQUcsQ0FBQztRQUVaLHdCQUF3QjtRQUN4QixNQUFNQyxrQkFBa0IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUEyRHpCLENBQUM7UUFFRCx5QkFBeUI7UUFDekIsTUFBTSxFQUFFSCxPQUFPSSxXQUFXLEVBQUUsR0FBRyxNQUFNWCxtREFBUUEsQ0FBQ1ksR0FBRyxDQUFDLFlBQVk7WUFBRUMsS0FBS0g7UUFBZ0I7UUFDckYsSUFBSUMsYUFBYTtZQUNmSCxRQUFRQyxHQUFHLENBQUM7UUFDZDtRQUVBLHlCQUF5QjtRQUN6QixNQUFNSyxtQkFBbUIsQ0FBQzs7Ozs7Ozs7OztJQVUxQixDQUFDO1FBRUQsTUFBTSxFQUFFUCxPQUFPUSxZQUFZLEVBQUUsR0FBRyxNQUFNZixtREFBUUEsQ0FBQ1ksR0FBRyxDQUFDLFlBQVk7WUFBRUMsS0FBS0M7UUFBaUI7UUFDdkYsSUFBSUMsY0FBYztZQUNoQlAsUUFBUUMsR0FBRyxDQUFDO1FBQ2Q7UUFFQSw4QkFBOEI7UUFDOUIsTUFBTU8sdUJBQXVCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7SUFnQjlCLENBQUM7UUFFRCxNQUFNLEVBQUVULE9BQU9VLFNBQVMsRUFBRSxHQUFHLE1BQU1qQixtREFBUUEsQ0FBQ1ksR0FBRyxDQUFDLFlBQVk7WUFBRUMsS0FBS0c7UUFBcUI7UUFDeEYsSUFBSUMsV0FBVztZQUNiVCxRQUFRQyxHQUFHLENBQUM7UUFDZDtRQUVBLDJDQUEyQztRQUMzQyxNQUFNLEVBQUVTLE1BQU1DLE9BQU8sRUFBRVosT0FBT2EsWUFBWSxFQUFFLEdBQUcsTUFBTXBCLG1EQUFRQSxDQUMxRHFCLElBQUksQ0FBQyxnQkFDTEMsTUFBTSxDQUFDLEtBQ1BDLEtBQUssQ0FBQztRQUVULE1BQU0sRUFBRUwsTUFBTU0sS0FBSyxFQUFFakIsT0FBT2tCLFVBQVUsRUFBRSxHQUFHLE1BQU16QixtREFBUUEsQ0FDdERxQixJQUFJLENBQUMsU0FDTEMsTUFBTSxDQUFDLEtBQ1BDLEtBQUssQ0FBQztRQUVULElBQUlILGdCQUFnQkssWUFBWTtZQUM5QixNQUFNLElBQUlDLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRU4sY0FBY08sV0FBV0YsWUFBWUUsUUFBUSxDQUFDO1FBQ3ZGO1FBRUFuQixRQUFRQyxHQUFHLENBQUM7UUFFWixPQUFPTixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCc0IsU0FBUztZQUNURCxTQUFTO1lBQ1RULE1BQU07Z0JBQ0pDLFNBQVNBLFNBQVNVLFVBQVU7Z0JBQzVCTCxPQUFPQSxPQUFPSyxVQUFVO2dCQUN4QkMsYUFBYVg7Z0JBQ2JZLFdBQVdQO1lBQ2I7UUFDRjtJQUVGLEVBQUUsT0FBT2pCLE9BQVk7UUFDbkJDLFFBQVFELEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJzQixTQUFTO1lBQ1RyQixPQUFPQSxNQUFNb0IsT0FBTztZQUNwQkssU0FBU3pCO1FBQ1g7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9uaXRleWVpbnRyYW5ldC8uL3BhZ2VzL2FwaS9ydW4tc2NoZW1hLnRzP2VmYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICcuLi8uLi9saWIvc3VwYWJhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBzY2hlbWEgZXhlY3V0aW9uLi4uJyk7XG5cbiAgICAvLyBTdGVwIDE6IENyZWF0ZSB0YWJsZXNcbiAgICBjb25zdCBjcmVhdGVUYWJsZXNTUUwgPSBgXG4gICAgICAtLSBUYWJsZSB0byBzdG9yZSB1cGxvYWQgYmF0Y2ggbWV0YWRhdGFcbiAgICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVwbG9hZF9iYXRjaGVzIChcbiAgICAgICAgaWQgdXVpZCBQUklNQVJZIEtFWSBERUZBVUxUIGdlbl9yYW5kb21fdXVpZCgpLFxuICAgICAgICBmaWxlbmFtZSB0ZXh0LFxuICAgICAgICB0b3RhbF9pbnZvaWNlcyBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgICAgICB0b3RhbF9hbW91bnQgbnVtZXJpYygxMCwyKSBOT1QgTlVMTCxcbiAgICAgICAgbW9udGhzX2dlbmVyYXRlZCBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgICAgICBkYXRlX3JhbmdlX3N0YXJ0IGRhdGUgTk9UIE5VTEwsXG4gICAgICAgIGRhdGVfcmFuZ2VfZW5kIGRhdGUgTk9UIE5VTEwsXG4gICAgICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIERFRkFVTFQgdGltZXpvbmUoJ3V0Yyc6OnRleHQsIG5vdygpKSBOT1QgTlVMTCxcbiAgICAgICAgdXBkYXRlZF9hdCB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgREVGQVVMVCB0aW1lem9uZSgndXRjJzo6dGV4dCwgbm93KCkpIE5PVCBOVUxMXG4gICAgICApO1xuXG4gICAgICAtLSBUYWJsZSB0byBzdG9yZSBpbmRpdmlkdWFsIGludm9pY2UgcmVjb3Jkc1xuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgaW52b2ljZXMgKFxuICAgICAgICBpZCBiaWdpbnQgUFJJTUFSWSBLRVkgR0VORVJBVEVEIEFMV0FZUyBBUyBJREVOVElUWSxcbiAgICAgICAgaW52b2ljZV9kYXRlIGRhdGUgTk9UIE5VTEwsXG4gICAgICAgIGFtb3VudCBudW1lcmljKDEwLDIpIE5PVCBOVUxMLFxuICAgICAgICBkZXNjcmlwdGlvbiB0ZXh0LFxuICAgICAgICBtb250aF9yZWZlcmVuY2UgdGV4dCBOT1QgTlVMTCxcbiAgICAgICAgdXBsb2FkX2JhdGNoX2lkIHV1aWQgUkVGRVJFTkNFUyB1cGxvYWRfYmF0Y2hlcyhpZCkgT04gREVMRVRFIENBU0NBREUsXG4gICAgICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIERFRkFVTFQgdGltZXpvbmUoJ3V0Yyc6OnRleHQsIG5vdygpKSBOT1QgTlVMTFxuICAgICAgKTtcblxuICAgICAgLS0gVGFibGUgdG8gc3RvcmUgYWdncmVnYXRlZCBtb250aGx5IHJldmVudWUgZGF0YVxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgcmV2ZW51ZV9kYXRhIChcbiAgICAgICAgaWQgYmlnaW50IFBSSU1BUlkgS0VZIEdFTkVSQVRFRCBBTFdBWVMgQVMgSURFTlRJVFksXG4gICAgICAgIG1vbnRoIHRleHQgTk9UIE5VTEwsXG4gICAgICAgIHJldmVudWUgbnVtZXJpYygxMCwyKSBOT1QgTlVMTCxcbiAgICAgICAgeWVhciBpbnRlZ2VyIE5PVCBOVUxMLFxuICAgICAgICBtb250aF9udW1iZXIgaW50ZWdlciBOT1QgTlVMTCBDSEVDSyAobW9udGhfbnVtYmVyID49IDEgQU5EIG1vbnRoX251bWJlciA8PSAxMiksXG4gICAgICAgIGludm9pY2VfY291bnQgaW50ZWdlciBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIERFRkFVTFQgdGltZXpvbmUoJ3V0Yyc6OnRleHQsIG5vdygpKSBOT1QgTlVMTCxcbiAgICAgICAgdXBkYXRlZF9hdCB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgREVGQVVMVCB0aW1lem9uZSgndXRjJzo6dGV4dCwgbm93KCkpIE5PVCBOVUxMXG4gICAgICApO1xuXG4gICAgICAtLSBUYWJsZSB0byBzdG9yZSB0YXNrIGNvbHVtbnMgKEthbmJhbiBib2FyZCBjb2x1bW5zKVxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdGFza19jb2x1bW5zIChcbiAgICAgICAgaWQgdGV4dCBQUklNQVJZIEtFWSxcbiAgICAgICAgdGl0bGUgdGV4dCBOT1QgTlVMTCxcbiAgICAgICAgb3JkZXJfaW5kZXggaW50ZWdlciBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIERFRkFVTFQgdGltZXpvbmUoJ3V0Yyc6OnRleHQsIG5vdygpKSBOT1QgTlVMTCxcbiAgICAgICAgdXBkYXRlZF9hdCB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgREVGQVVMVCB0aW1lem9uZSgndXRjJzo6dGV4dCwgbm93KCkpIE5PVCBOVUxMXG4gICAgICApO1xuXG4gICAgICAtLSBUYWJsZSB0byBzdG9yZSB0YXNrc1xuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdGFza3MgKFxuICAgICAgICBpZCB0ZXh0IFBSSU1BUlkgS0VZLFxuICAgICAgICB0aXRsZSB0ZXh0IE5PVCBOVUxMLFxuICAgICAgICBkZXNjcmlwdGlvbiB0ZXh0LFxuICAgICAgICBwcmlvcml0eSB0ZXh0IENIRUNLIChwcmlvcml0eSBJTiAoJ0xvdycsICdNZWRpdW0nLCAnSGlnaCcsICdDcml0aWNhbCcpKSBERUZBVUxUICdNZWRpdW0nLFxuICAgICAgICBhc3NpZ25lZSB0ZXh0LFxuICAgICAgICB0YWdzIHRleHRbXSBERUZBVUxUICd7fScsXG4gICAgICAgIGNvbHVtbl9pZCB0ZXh0IE5PVCBOVUxMIFJFRkVSRU5DRVMgdGFza19jb2x1bW5zKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcbiAgICAgICAgb3JkZXJfaW5kZXggaW50ZWdlciBOT1QgTlVMTCBERUZBVUxUIDAsXG4gICAgICAgIGNyZWF0ZWRfYXQgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIERFRkFVTFQgdGltZXpvbmUoJ3V0Yyc6OnRleHQsIG5vdygpKSBOT1QgTlVMTCxcbiAgICAgICAgdXBkYXRlZF9hdCB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgREVGQVVMVCB0aW1lem9uZSgndXRjJzo6dGV4dCwgbm93KCkpIE5PVCBOVUxMXG4gICAgICApO1xuICAgIGA7XG5cbiAgICAvLyBFeGVjdXRlIHRhYmxlIGNyZWF0aW9uXG4gICAgY29uc3QgeyBlcnJvcjogdGFibGVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygnZXhlY19zcWwnLCB7IHNxbDogY3JlYXRlVGFibGVzU1FMIH0pO1xuICAgIGlmICh0YWJsZXNFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ1RhYmxlcyBjcmVhdGlvbiBjb21wbGV0ZWQgKHRhYmxlcyBtaWdodCBhbHJlYWR5IGV4aXN0KScpO1xuICAgIH1cblxuICAgIC8vIFN0ZXAgMjogQ3JlYXRlIGluZGV4ZXNcbiAgICBjb25zdCBjcmVhdGVJbmRleGVzU1FMID0gYFxuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X2ludm9pY2VzX2RhdGUgT04gaW52b2ljZXMoaW52b2ljZV9kYXRlKTtcbiAgICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9pbnZvaWNlc19tb250aF9yZWYgT04gaW52b2ljZXMobW9udGhfcmVmZXJlbmNlKTtcbiAgICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF9pbnZvaWNlc19iYXRjaCBPTiBpbnZvaWNlcyh1cGxvYWRfYmF0Y2hfaWQpO1xuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X3JldmVudWVfeWVhcl9tb250aCBPTiByZXZlbnVlX2RhdGEoeWVhciwgbW9udGhfbnVtYmVyKTtcbiAgICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF90YXNrc19jb2x1bW4gT04gdGFza3MoY29sdW1uX2lkKTtcbiAgICAgIENSRUFURSBJTkRFWCBJRiBOT1QgRVhJU1RTIGlkeF90YXNrc19wcmlvcml0eSBPTiB0YXNrcyhwcmlvcml0eSk7XG4gICAgICBDUkVBVEUgSU5ERVggSUYgTk9UIEVYSVNUUyBpZHhfdGFza3NfYXNzaWduZWUgT04gdGFza3MoYXNzaWduZWUpO1xuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X3Rhc2tfY29sdW1uc19vcmRlciBPTiB0YXNrX2NvbHVtbnMob3JkZXJfaW5kZXgpO1xuICAgICAgQ1JFQVRFIElOREVYIElGIE5PVCBFWElTVFMgaWR4X3Rhc2tzX29yZGVyIE9OIHRhc2tzKG9yZGVyX2luZGV4KTtcbiAgICBgO1xuXG4gICAgY29uc3QgeyBlcnJvcjogaW5kZXhlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2V4ZWNfc3FsJywgeyBzcWw6IGNyZWF0ZUluZGV4ZXNTUUwgfSk7XG4gICAgaWYgKGluZGV4ZXNFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ0luZGV4ZXMgY3JlYXRpb24gY29tcGxldGVkJyk7XG4gICAgfVxuXG4gICAgLy8gU3RlcCAzOiBJbnNlcnQgZGVmYXVsdCBkYXRhXG4gICAgY29uc3QgaW5zZXJ0RGVmYXVsdERhdGFTUUwgPSBgXG4gICAgICBJTlNFUlQgSU5UTyB0YXNrX2NvbHVtbnMgKGlkLCB0aXRsZSwgb3JkZXJfaW5kZXgpIFZBTFVFU1xuICAgICAgKCdiYWNrbG9nJywgJ/Cfk4sgQmFja2xvZycsIDApLFxuICAgICAgKCd0b2RvJywgJ/Cfk50gVG8gRG8nLCAxKSxcbiAgICAgICgnaW4tcHJvZ3Jlc3MnLCAn8J+UhCBJbiBQcm9ncmVzcycsIDIpLFxuICAgICAgKCdyZXZpZXcnLCAn8J+RgCBSZXZpZXcnLCAzKSxcbiAgICAgICgnZG9uZScsICfinIUgRG9uZScsIDQpXG4gICAgICBPTiBDT05GTElDVCAoaWQpIERPIE5PVEhJTkc7XG5cbiAgICAgIElOU0VSVCBJTlRPIHRhc2tzIChpZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBwcmlvcml0eSwgYXNzaWduZWUsIHRhZ3MsIGNvbHVtbl9pZCwgb3JkZXJfaW5kZXgpIFZBTFVFU1xuICAgICAgKCd0YXNrLTEnLCAnU3lzdGVtIFBlcmZvcm1hbmNlIEF1ZGl0JywgJ0NvbXBsZXRlIGNvbXByZWhlbnNpdmUgcmV2aWV3IG9mIHN5c3RlbSBwZXJmb3JtYW5jZSBtZXRyaWNzIGFuZCBpZGVudGlmeSBib3R0bGVuZWNrcycsICdIaWdoJywgJ0FsZXggSy4nLCBBUlJBWVsncGVyZm9ybWFuY2UnLCAnYXVkaXQnXSwgJ2JhY2tsb2cnLCAwKSxcbiAgICAgICgndGFzay0yJywgJ1VwZGF0ZSBTZWN1cml0eSBQcm90b2NvbHMnLCAnUmV2aWV3IGFuZCB1cGRhdGUgYWxsIHNlY3VyaXR5IHByb3RvY29scyBhY2NvcmRpbmcgdG8gbGF0ZXN0IGNvbXBsaWFuY2Ugc3RhbmRhcmRzJywgJ01lZGl1bScsICdTYXJhaCBNLicsIEFSUkFZWydzZWN1cml0eScsICdjb21wbGlhbmNlJ10sICdiYWNrbG9nJywgMSksXG4gICAgICAoJ3Rhc2stMycsICdEYXRhYmFzZSBPcHRpbWl6YXRpb24nLCAnT3B0aW1pemUgZGF0YWJhc2UgcXVlcmllcyBhbmQgaW5kZXhpbmcgZm9yIGJldHRlciBwZXJmb3JtYW5jZScsICdMb3cnLCAnTWlrZSBSLicsIEFSUkFZWydkYXRhYmFzZScsICdvcHRpbWl6YXRpb24nXSwgJ3RvZG8nLCAwKSxcbiAgICAgICgndGFzay00JywgJ0FQSSBJbnRlZ3JhdGlvbicsICdJbnRlZ3JhdGUgdGhpcmQtcGFydHkgcGF5bWVudCBnYXRld2F5IEFQSScsICdDcml0aWNhbCcsICdKZXNzaWNhIEwuJywgQVJSQVlbJ2FwaScsICdwYXltZW50J10sICdpbi1wcm9ncmVzcycsIDApLFxuICAgICAgKCd0YXNrLTUnLCAnVXNlciBBdXRoZW50aWNhdGlvbicsICdJbXBsZW1lbnQgc2VjdXJlIHVzZXIgYXV0aGVudGljYXRpb24gc3lzdGVtJywgJ0hpZ2gnLCAnRGF2aWQgQy4nLCBBUlJBWVsnYXV0aCcsICdzZWN1cml0eSddLCAnZG9uZScsIDApXG4gICAgICBPTiBDT05GTElDVCAoaWQpIERPIE5PVEhJTkc7XG4gICAgYDtcblxuICAgIGNvbnN0IHsgZXJyb3I6IGRhdGFFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdleGVjX3NxbCcsIHsgc3FsOiBpbnNlcnREZWZhdWx0RGF0YVNRTCB9KTtcbiAgICBpZiAoZGF0YUVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGVmYXVsdCBkYXRhIGluc2VydGlvbiBjb21wbGV0ZWQnKTtcbiAgICB9XG5cbiAgICAvLyBTdGVwIDQ6IFRlc3QgdGhlIHRhYmxlcyBieSBxdWVyeWluZyB0aGVtXG4gICAgY29uc3QgeyBkYXRhOiBjb2x1bW5zLCBlcnJvcjogY29sdW1uc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Rhc2tfY29sdW1ucycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5vcmRlcignb3JkZXJfaW5kZXgnKTtcblxuICAgIGNvbnN0IHsgZGF0YTogdGFza3MsIGVycm9yOiB0YXNrc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Rhc2tzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLm9yZGVyKCdvcmRlcl9pbmRleCcpO1xuXG4gICAgaWYgKGNvbHVtbnNFcnJvciB8fCB0YXNrc0Vycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhYmxlIHF1ZXJ5IGZhaWxlZDogJHtjb2x1bW5zRXJyb3I/Lm1lc3NhZ2UgfHwgdGFza3NFcnJvcj8ubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnU2NoZW1hIGV4ZWN1dGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6ICdTY2hlbWEgZXhlY3V0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY29sdW1uczogY29sdW1ucz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHRhc2tzOiB0YXNrcz8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIGNvbHVtbnNEYXRhOiBjb2x1bW5zLFxuICAgICAgICB0YXNrc0RhdGE6IHRhc2tzXG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1NjaGVtYSBleGVjdXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgZGV0YWlsczogZXJyb3JcbiAgICB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsic3VwYWJhc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZVRhYmxlc1NRTCIsInRhYmxlc0Vycm9yIiwicnBjIiwic3FsIiwiY3JlYXRlSW5kZXhlc1NRTCIsImluZGV4ZXNFcnJvciIsImluc2VydERlZmF1bHREYXRhU1FMIiwiZGF0YUVycm9yIiwiZGF0YSIsImNvbHVtbnMiLCJjb2x1bW5zRXJyb3IiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJ0YXNrcyIsInRhc2tzRXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJzdWNjZXNzIiwibGVuZ3RoIiwiY29sdW1uc0RhdGEiLCJ0YXNrc0RhdGEiLCJkZXRhaWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/run-schema.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frun-schema&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frun-schema.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();