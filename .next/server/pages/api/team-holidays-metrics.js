"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/team-holidays-metrics";
exports.ids = ["pages/api/team-holidays-metrics"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteam-holidays-metrics&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fteam-holidays-metrics.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteam-holidays-metrics&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fteam-holidays-metrics.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_team_holidays_metrics_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/team-holidays-metrics.ts */ \"(api)/./pages/api/team-holidays-metrics.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_team_holidays_metrics_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_team_holidays_metrics_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/team-holidays-metrics\",\n        pathname: \"/api/team-holidays-metrics\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_team_holidays_metrics_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnRlYW0taG9saWRheXMtbWV0cmljcyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGdGVhbS1ob2xpZGF5cy1tZXRyaWNzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2lFO0FBQ2pFO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxnRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsZ0VBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW9uaXRleWVpbnRyYW5ldC8/MzExYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3RlYW0taG9saWRheXMtbWV0cmljcy50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RlYW0taG9saWRheXMtbWV0cmljc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RlYW0taG9saWRheXMtbWV0cmljc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteam-holidays-metrics&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fteam-holidays-metrics.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/team-holidays-metrics.ts":
/*!********************************************!*\
  !*** ./pages/api/team-holidays-metrics.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    const TIMETASTIC_API_KEY = \"acf87e83-3e43-42df-b7d6-861a69f90414\";\n    try {\n        // Get current year and next year for comprehensive holiday data\n        const currentYear = new Date().getFullYear();\n        const nextYear = currentYear + 1;\n        // Fetch employee holidays for current and next year\n        const [currentYearResponse, nextYearResponse] = await Promise.all([\n            fetch(`https://app.timetastic.co.uk/api/holidays?year=${currentYear}`, {\n                headers: {\n                    \"Authorization\": `Bearer ${TIMETASTIC_API_KEY}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            }),\n            fetch(`https://app.timetastic.co.uk/api/holidays?year=${nextYear}`, {\n                headers: {\n                    \"Authorization\": `Bearer ${TIMETASTIC_API_KEY}`,\n                    \"Content-Type\": \"application/json\"\n                }\n            })\n        ]);\n        let allHolidays = [];\n        // Process current year holidays\n        if (currentYearResponse.ok) {\n            const currentYearData = await currentYearResponse.json();\n            if (currentYearData.holidays && Array.isArray(currentYearData.holidays)) {\n                allHolidays.push(...currentYearData.holidays);\n            }\n        }\n        // Process next year holidays\n        if (nextYearResponse.ok) {\n            const nextYearData = await nextYearResponse.json();\n            if (nextYearData.holidays && Array.isArray(nextYearData.holidays)) {\n                allHolidays.push(...nextYearData.holidays);\n            }\n        }\n        // Calculate date ranges\n        const today = new Date();\n        today.setHours(0, 0, 0, 0);\n        const fourteenDaysFromNow = new Date(today);\n        fourteenDaysFromNow.setDate(fourteenDaysFromNow.getDate() + 14);\n        const thirtyDaysFromNow = new Date(today);\n        thirtyDaysFromNow.setDate(thirtyDaysFromNow.getDate() + 30);\n        // Deduplicate holidays based on unique combination of employee, start date, and end date\n        const uniqueHolidays = allHolidays.filter((holiday, index, self)=>{\n            return index === self.findIndex((h)=>h.userId === holiday.userId && h.startDate === holiday.startDate && h.endDate === holiday.endDate && h.status === holiday.status);\n        });\n        let next14Days = 0;\n        let next30Days = 0;\n        let currentlyOnHoliday = 0;\n        let totalUpcoming = 0;\n        // Filter and count holidays based on approved status and date ranges\n        uniqueHolidays.forEach((holiday)=>{\n            // Only count approved holidays\n            if (holiday.status !== \"Approved\") {\n                return;\n            }\n            const startDate = new Date(holiday.startDate);\n            const endDate = new Date(holiday.endDate);\n            startDate.setHours(0, 0, 0, 0);\n            endDate.setHours(23, 59, 59, 999);\n            // Currently on holiday (today falls within the holiday period)\n            if (startDate <= today && endDate >= today) {\n                currentlyOnHoliday++;\n            }\n            // Holiday starts in the next 14 days\n            if (startDate >= today && startDate <= fourteenDaysFromNow) {\n                next14Days++;\n            }\n            // Holiday starts in the next 30 days\n            if (startDate >= today && startDate <= thirtyDaysFromNow) {\n                next30Days++;\n            }\n            // Any future holiday\n            if (startDate >= today) {\n                totalUpcoming++;\n            }\n        });\n        const metrics = {\n            next14Days,\n            next30Days,\n            currentlyOnHoliday,\n            totalUpcoming\n        };\n        res.status(200).json(metrics);\n    } catch (error) {\n        console.error(\"Error fetching team holiday metrics:\", error);\n        // Return fallback data for development/testing\n        const fallbackMetrics = {\n            next14Days: 2,\n            next30Days: 5,\n            currentlyOnHoliday: 0,\n            totalUpcoming: 8\n        };\n        res.status(200).json(fallbackMetrics);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdGVhbS1ob2xpZGF5cy1tZXRyaWNzLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFTZSxlQUFlQSxRQUM1QkMsR0FBbUIsRUFDbkJDLEdBQXdEO0lBRXhELElBQUlELElBQUlFLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLE1BQU1DLHFCQUFxQjtJQUUzQixJQUFJO1FBQ0YsZ0VBQWdFO1FBQ2hFLE1BQU1DLGNBQWMsSUFBSUMsT0FBT0MsV0FBVztRQUMxQyxNQUFNQyxXQUFXSCxjQUFjO1FBRS9CLG9EQUFvRDtRQUNwRCxNQUFNLENBQUNJLHFCQUFxQkMsaUJBQWlCLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1lBQ2hFQyxNQUFNLENBQUMsK0NBQStDLEVBQUVSLFlBQVksQ0FBQyxFQUFFO2dCQUNyRVMsU0FBUztvQkFDUCxpQkFBaUIsQ0FBQyxPQUFPLEVBQUVWLG1CQUFtQixDQUFDO29CQUMvQyxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFDQVMsTUFBTSxDQUFDLCtDQUErQyxFQUFFTCxTQUFTLENBQUMsRUFBRTtnQkFDbEVNLFNBQVM7b0JBQ1AsaUJBQWlCLENBQUMsT0FBTyxFQUFFVixtQkFBbUIsQ0FBQztvQkFDL0MsZ0JBQWdCO2dCQUNsQjtZQUNGO1NBQ0Q7UUFFRCxJQUFJVyxjQUFxQixFQUFFO1FBRTNCLGdDQUFnQztRQUNoQyxJQUFJTixvQkFBb0JPLEVBQUUsRUFBRTtZQUMxQixNQUFNQyxrQkFBa0IsTUFBTVIsb0JBQW9CUCxJQUFJO1lBQ3RELElBQUllLGdCQUFnQkMsUUFBUSxJQUFJQyxNQUFNQyxPQUFPLENBQUNILGdCQUFnQkMsUUFBUSxHQUFHO2dCQUN2RUgsWUFBWU0sSUFBSSxJQUFJSixnQkFBZ0JDLFFBQVE7WUFDOUM7UUFDRjtRQUVBLDZCQUE2QjtRQUM3QixJQUFJUixpQkFBaUJNLEVBQUUsRUFBRTtZQUN2QixNQUFNTSxlQUFlLE1BQU1aLGlCQUFpQlIsSUFBSTtZQUNoRCxJQUFJb0IsYUFBYUosUUFBUSxJQUFJQyxNQUFNQyxPQUFPLENBQUNFLGFBQWFKLFFBQVEsR0FBRztnQkFDakVILFlBQVlNLElBQUksSUFBSUMsYUFBYUosUUFBUTtZQUMzQztRQUNGO1FBRUEsd0JBQXdCO1FBQ3hCLE1BQU1LLFFBQVEsSUFBSWpCO1FBQ2xCaUIsTUFBTUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxHQUFHO1FBRXhCLE1BQU1DLHNCQUFzQixJQUFJbkIsS0FBS2lCO1FBQ3JDRSxvQkFBb0JDLE9BQU8sQ0FBQ0Qsb0JBQW9CRSxPQUFPLEtBQUs7UUFFNUQsTUFBTUMsb0JBQW9CLElBQUl0QixLQUFLaUI7UUFDbkNLLGtCQUFrQkYsT0FBTyxDQUFDRSxrQkFBa0JELE9BQU8sS0FBSztRQUV4RCx5RkFBeUY7UUFDekYsTUFBTUUsaUJBQWlCZCxZQUFZZSxNQUFNLENBQUMsQ0FBQ0MsU0FBU0MsT0FBT0M7WUFDekQsT0FBT0QsVUFBVUMsS0FBS0MsU0FBUyxDQUFDLENBQUNDLElBQy9CQSxFQUFFQyxNQUFNLEtBQUtMLFFBQVFLLE1BQU0sSUFDM0JELEVBQUVFLFNBQVMsS0FBS04sUUFBUU0sU0FBUyxJQUNqQ0YsRUFBRUcsT0FBTyxLQUFLUCxRQUFRTyxPQUFPLElBQzdCSCxFQUFFbEMsTUFBTSxLQUFLOEIsUUFBUTlCLE1BQU07UUFFL0I7UUFFQSxJQUFJc0MsYUFBYTtRQUNqQixJQUFJQyxhQUFhO1FBQ2pCLElBQUlDLHFCQUFxQjtRQUN6QixJQUFJQyxnQkFBZ0I7UUFFcEIscUVBQXFFO1FBQ3JFYixlQUFlYyxPQUFPLENBQUMsQ0FBQ1o7WUFDdEIsK0JBQStCO1lBQy9CLElBQUlBLFFBQVE5QixNQUFNLEtBQUssWUFBWTtnQkFDakM7WUFDRjtZQUVBLE1BQU1vQyxZQUFZLElBQUkvQixLQUFLeUIsUUFBUU0sU0FBUztZQUM1QyxNQUFNQyxVQUFVLElBQUloQyxLQUFLeUIsUUFBUU8sT0FBTztZQUN4Q0QsVUFBVWIsUUFBUSxDQUFDLEdBQUcsR0FBRyxHQUFHO1lBQzVCYyxRQUFRZCxRQUFRLENBQUMsSUFBSSxJQUFJLElBQUk7WUFFN0IsK0RBQStEO1lBQy9ELElBQUlhLGFBQWFkLFNBQVNlLFdBQVdmLE9BQU87Z0JBQzFDa0I7WUFDRjtZQUVBLHFDQUFxQztZQUNyQyxJQUFJSixhQUFhZCxTQUFTYyxhQUFhWixxQkFBcUI7Z0JBQzFEYztZQUNGO1lBRUEscUNBQXFDO1lBQ3JDLElBQUlGLGFBQWFkLFNBQVNjLGFBQWFULG1CQUFtQjtnQkFDeERZO1lBQ0Y7WUFFQSxxQkFBcUI7WUFDckIsSUFBSUgsYUFBYWQsT0FBTztnQkFDdEJtQjtZQUNGO1FBQ0Y7UUFFQSxNQUFNRSxVQUEwQjtZQUM5Qkw7WUFDQUM7WUFDQUM7WUFDQUM7UUFDRjtRQUVBM0MsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzBDO0lBRXZCLEVBQUUsT0FBT3pDLE9BQU87UUFDZDBDLFFBQVExQyxLQUFLLENBQUMsd0NBQXdDQTtRQUV0RCwrQ0FBK0M7UUFDL0MsTUFBTTJDLGtCQUFrQztZQUN0Q1AsWUFBWTtZQUNaQyxZQUFZO1lBQ1pDLG9CQUFvQjtZQUNwQkMsZUFBZTtRQUNqQjtRQUVBM0MsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQzRDO0lBQ3ZCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb25pdGV5ZWludHJhbmV0Ly4vcGFnZXMvYXBpL3RlYW0taG9saWRheXMtbWV0cmljcy50cz9jOTZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuXG5pbnRlcmZhY2UgSG9saWRheU1ldHJpY3Mge1xuICBuZXh0MTREYXlzOiBudW1iZXI7XG4gIG5leHQzMERheXM6IG51bWJlcjtcbiAgY3VycmVudGx5T25Ib2xpZGF5OiBudW1iZXI7XG4gIHRvdGFsVXBjb21pbmc6IG51bWJlcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2U8SG9saWRheU1ldHJpY3MgfCB7IGVycm9yOiBzdHJpbmcgfT5cbikge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICBjb25zdCBUSU1FVEFTVElDX0FQSV9LRVkgPSBcImFjZjg3ZTgzLTNlNDMtNDJkZi1iN2Q2LTg2MWE2OWY5MDQxNFwiO1xuICBcbiAgdHJ5IHtcbiAgICAvLyBHZXQgY3VycmVudCB5ZWFyIGFuZCBuZXh0IHllYXIgZm9yIGNvbXByZWhlbnNpdmUgaG9saWRheSBkYXRhXG4gICAgY29uc3QgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgbmV4dFllYXIgPSBjdXJyZW50WWVhciArIDE7XG4gICAgXG4gICAgLy8gRmV0Y2ggZW1wbG95ZWUgaG9saWRheXMgZm9yIGN1cnJlbnQgYW5kIG5leHQgeWVhclxuICAgIGNvbnN0IFtjdXJyZW50WWVhclJlc3BvbnNlLCBuZXh0WWVhclJlc3BvbnNlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGZldGNoKGBodHRwczovL2FwcC50aW1ldGFzdGljLmNvLnVrL2FwaS9ob2xpZGF5cz95ZWFyPSR7Y3VycmVudFllYXJ9YCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IGBCZWFyZXIgJHtUSU1FVEFTVElDX0FQSV9LRVl9YCxcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGZldGNoKGBodHRwczovL2FwcC50aW1ldGFzdGljLmNvLnVrL2FwaS9ob2xpZGF5cz95ZWFyPSR7bmV4dFllYXJ9YCwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IGBCZWFyZXIgJHtUSU1FVEFTVElDX0FQSV9LRVl9YCxcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9XG4gICAgICB9KVxuICAgIF0pO1xuXG4gICAgbGV0IGFsbEhvbGlkYXlzOiBhbnlbXSA9IFtdO1xuICAgIFxuICAgIC8vIFByb2Nlc3MgY3VycmVudCB5ZWFyIGhvbGlkYXlzXG4gICAgaWYgKGN1cnJlbnRZZWFyUmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRZZWFyRGF0YSA9IGF3YWl0IGN1cnJlbnRZZWFyUmVzcG9uc2UuanNvbigpO1xuICAgICAgaWYgKGN1cnJlbnRZZWFyRGF0YS5ob2xpZGF5cyAmJiBBcnJheS5pc0FycmF5KGN1cnJlbnRZZWFyRGF0YS5ob2xpZGF5cykpIHtcbiAgICAgICAgYWxsSG9saWRheXMucHVzaCguLi5jdXJyZW50WWVhckRhdGEuaG9saWRheXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgbmV4dCB5ZWFyIGhvbGlkYXlzXG4gICAgaWYgKG5leHRZZWFyUmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IG5leHRZZWFyRGF0YSA9IGF3YWl0IG5leHRZZWFyUmVzcG9uc2UuanNvbigpO1xuICAgICAgaWYgKG5leHRZZWFyRGF0YS5ob2xpZGF5cyAmJiBBcnJheS5pc0FycmF5KG5leHRZZWFyRGF0YS5ob2xpZGF5cykpIHtcbiAgICAgICAgYWxsSG9saWRheXMucHVzaCguLi5uZXh0WWVhckRhdGEuaG9saWRheXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSBkYXRlIHJhbmdlc1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBcbiAgICBjb25zdCBmb3VydGVlbkRheXNGcm9tTm93ID0gbmV3IERhdGUodG9kYXkpO1xuICAgIGZvdXJ0ZWVuRGF5c0Zyb21Ob3cuc2V0RGF0ZShmb3VydGVlbkRheXNGcm9tTm93LmdldERhdGUoKSArIDE0KTtcbiAgICBcbiAgICBjb25zdCB0aGlydHlEYXlzRnJvbU5vdyA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgICB0aGlydHlEYXlzRnJvbU5vdy5zZXREYXRlKHRoaXJ0eURheXNGcm9tTm93LmdldERhdGUoKSArIDMwKTtcblxuICAgIC8vIERlZHVwbGljYXRlIGhvbGlkYXlzIGJhc2VkIG9uIHVuaXF1ZSBjb21iaW5hdGlvbiBvZiBlbXBsb3llZSwgc3RhcnQgZGF0ZSwgYW5kIGVuZCBkYXRlXG4gICAgY29uc3QgdW5pcXVlSG9saWRheXMgPSBhbGxIb2xpZGF5cy5maWx0ZXIoKGhvbGlkYXksIGluZGV4LCBzZWxmKSA9PiB7XG4gICAgICByZXR1cm4gaW5kZXggPT09IHNlbGYuZmluZEluZGV4KChoKSA9PiBcbiAgICAgICAgaC51c2VySWQgPT09IGhvbGlkYXkudXNlcklkICYmIFxuICAgICAgICBoLnN0YXJ0RGF0ZSA9PT0gaG9saWRheS5zdGFydERhdGUgJiYgXG4gICAgICAgIGguZW5kRGF0ZSA9PT0gaG9saWRheS5lbmREYXRlICYmXG4gICAgICAgIGguc3RhdHVzID09PSBob2xpZGF5LnN0YXR1c1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGxldCBuZXh0MTREYXlzID0gMDtcbiAgICBsZXQgbmV4dDMwRGF5cyA9IDA7XG4gICAgbGV0IGN1cnJlbnRseU9uSG9saWRheSA9IDA7XG4gICAgbGV0IHRvdGFsVXBjb21pbmcgPSAwO1xuXG4gICAgLy8gRmlsdGVyIGFuZCBjb3VudCBob2xpZGF5cyBiYXNlZCBvbiBhcHByb3ZlZCBzdGF0dXMgYW5kIGRhdGUgcmFuZ2VzXG4gICAgdW5pcXVlSG9saWRheXMuZm9yRWFjaCgoaG9saWRheTogYW55KSA9PiB7XG4gICAgICAvLyBPbmx5IGNvdW50IGFwcHJvdmVkIGhvbGlkYXlzXG4gICAgICBpZiAoaG9saWRheS5zdGF0dXMgIT09ICdBcHByb3ZlZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShob2xpZGF5LnN0YXJ0RGF0ZSk7XG4gICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoaG9saWRheS5lbmREYXRlKTtcbiAgICAgIHN0YXJ0RGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIGVuZERhdGUuc2V0SG91cnMoMjMsIDU5LCA1OSwgOTk5KTtcblxuICAgICAgLy8gQ3VycmVudGx5IG9uIGhvbGlkYXkgKHRvZGF5IGZhbGxzIHdpdGhpbiB0aGUgaG9saWRheSBwZXJpb2QpXG4gICAgICBpZiAoc3RhcnREYXRlIDw9IHRvZGF5ICYmIGVuZERhdGUgPj0gdG9kYXkpIHtcbiAgICAgICAgY3VycmVudGx5T25Ib2xpZGF5Kys7XG4gICAgICB9XG5cbiAgICAgIC8vIEhvbGlkYXkgc3RhcnRzIGluIHRoZSBuZXh0IDE0IGRheXNcbiAgICAgIGlmIChzdGFydERhdGUgPj0gdG9kYXkgJiYgc3RhcnREYXRlIDw9IGZvdXJ0ZWVuRGF5c0Zyb21Ob3cpIHtcbiAgICAgICAgbmV4dDE0RGF5cysrO1xuICAgICAgfVxuXG4gICAgICAvLyBIb2xpZGF5IHN0YXJ0cyBpbiB0aGUgbmV4dCAzMCBkYXlzXG4gICAgICBpZiAoc3RhcnREYXRlID49IHRvZGF5ICYmIHN0YXJ0RGF0ZSA8PSB0aGlydHlEYXlzRnJvbU5vdykge1xuICAgICAgICBuZXh0MzBEYXlzKys7XG4gICAgICB9XG5cbiAgICAgIC8vIEFueSBmdXR1cmUgaG9saWRheVxuICAgICAgaWYgKHN0YXJ0RGF0ZSA+PSB0b2RheSkge1xuICAgICAgICB0b3RhbFVwY29taW5nKys7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBtZXRyaWNzOiBIb2xpZGF5TWV0cmljcyA9IHtcbiAgICAgIG5leHQxNERheXMsXG4gICAgICBuZXh0MzBEYXlzLFxuICAgICAgY3VycmVudGx5T25Ib2xpZGF5LFxuICAgICAgdG90YWxVcGNvbWluZ1xuICAgIH07XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihtZXRyaWNzKTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHRlYW0gaG9saWRheSBtZXRyaWNzOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyBSZXR1cm4gZmFsbGJhY2sgZGF0YSBmb3IgZGV2ZWxvcG1lbnQvdGVzdGluZ1xuICAgIGNvbnN0IGZhbGxiYWNrTWV0cmljczogSG9saWRheU1ldHJpY3MgPSB7XG4gICAgICBuZXh0MTREYXlzOiAyLFxuICAgICAgbmV4dDMwRGF5czogNSxcbiAgICAgIGN1cnJlbnRseU9uSG9saWRheTogMCxcbiAgICAgIHRvdGFsVXBjb21pbmc6IDhcbiAgICB9O1xuICAgIFxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGZhbGxiYWNrTWV0cmljcyk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJUSU1FVEFTVElDX0FQSV9LRVkiLCJjdXJyZW50WWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsIm5leHRZZWFyIiwiY3VycmVudFllYXJSZXNwb25zZSIsIm5leHRZZWFyUmVzcG9uc2UiLCJQcm9taXNlIiwiYWxsIiwiZmV0Y2giLCJoZWFkZXJzIiwiYWxsSG9saWRheXMiLCJvayIsImN1cnJlbnRZZWFyRGF0YSIsImhvbGlkYXlzIiwiQXJyYXkiLCJpc0FycmF5IiwicHVzaCIsIm5leHRZZWFyRGF0YSIsInRvZGF5Iiwic2V0SG91cnMiLCJmb3VydGVlbkRheXNGcm9tTm93Iiwic2V0RGF0ZSIsImdldERhdGUiLCJ0aGlydHlEYXlzRnJvbU5vdyIsInVuaXF1ZUhvbGlkYXlzIiwiZmlsdGVyIiwiaG9saWRheSIsImluZGV4Iiwic2VsZiIsImZpbmRJbmRleCIsImgiLCJ1c2VySWQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwibmV4dDE0RGF5cyIsIm5leHQzMERheXMiLCJjdXJyZW50bHlPbkhvbGlkYXkiLCJ0b3RhbFVwY29taW5nIiwiZm9yRWFjaCIsIm1ldHJpY3MiLCJjb25zb2xlIiwiZmFsbGJhY2tNZXRyaWNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/team-holidays-metrics.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fteam-holidays-metrics&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fteam-holidays-metrics.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();